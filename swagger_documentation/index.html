<!DOCTYPE html>
<html>
<head>
    <title>Figshare documentation</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="max-age=120"/>
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/images/favicon-196x196.png" sizes="196x196">
    <link rel="icon" type="image/png" href="/images/favicon-128.png" sizes="128x128">

    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <!--style type="text/css"></style-->

    <link href="css/index.css" rel="stylesheet"/>
    <link href='css/standalone.css' rel='stylesheet'/>
    <link href='css/api-explorer.css' rel='stylesheet' type='text/css'/>
    <link href='css/screen.css' media='screen' rel='stylesheet' type='text/css'/>



    <script src='lib/jquery-1.8.0.min.js' type='text/javascript'></script>
    <script src='lib/jquery.slideto.min.js' type='text/javascript'></script>
    <script src='lib/jquery.wiggle.min.js' type='text/javascript'></script>
    <script src='lib/jquery.ba-bbq.min.js' type='text/javascript'></script>
    <script src='lib/handlebars-2.0.0.js' type='text/javascript'></script>
    <script src='lib/underscore-min.js' type='text/javascript'></script>
    <script src='lib/backbone-min.js' type='text/javascript'></script>
    <script src='lib/figshare.js' type='text/javascript'></script>
    <script src='swagger-ui.js' type='text/javascript'></script>
    <script src='lib/jsoneditor.js' type='text/javascript'></script>
    <script src='lib/highlight.7.3.pack.js' type='text/javascript'></script>
    <script src='lib/marked.js' type='text/javascript'></script>
    <script src='lib/swagger-oauth.js' type='text/javascript'></script>
    <script src='lib/bootstrap.min.js' type='text/javascript'></script>

    <script type="text/javascript">
        jQuery.browser = jQuery.browser || {};
        (function () {
            jQuery.browser.msie = jQuery.browser.msie || false;
            jQuery.browser.version = jQuery.browser.version || 0;
            if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
                jQuery.browser.msie = true;
                jQuery.browser.version = RegExp.$1;
            }
        })();
    </script>

    <script type="text/javascript">
        $(function () {
            var url = window.location.search.match(/url=([^&]+)/);
            if (url && url.length > 1) {
                url = decodeURIComponent(url[1]);
            } else {
                url = window.location.toString().replace(/\/*#?.*/, '/swagger_parsed.json?v='+parseInt(Date.now()/1000/60/60));
            }

            window.swaggerUi = new SwaggerUi({
                url: url,
                dom_id: "swagger-ui-container",
                supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch'],
                docExpansion: "none",
                onComplete: function (swaggerApi, swaggerUi) {
                    if (typeof initOAuth == "function") {

                        initOAuth({
                            clientId: "ffe7748a-3a3f-4860-a02a-42ab08e4fde2",
                            realm: "realm",
                            appName: "Swagger"
                        });

                    }

                    $('pre code').each(function (i, e) {
                        if (!$(e).hasClass("nohighlight"))
                            hljs.highlightBlock(e);
                    });

                    //$('.model-signature div.collapse').addClass('in');

                    if (swaggerUi.options.url) {
                        $('#input_baseUrl').val(swaggerUi.options.url);
                    }
                    if (swaggerUi.options.apiKey) {
                        $('#input_apiKey').val(swaggerUi.options.apiKey);
                    }

                    $("[data-toggle='tooltip']").tooltip();


                    $('#input_apiKey').change(addApiKeyAuthorization);
                    addApiKeyAuthorization();

                    addAdditionalDescriptions();
                    addSampleCodesToOperations();

                    window.setTimeout(function(){
                      $('.figsh_loader').hide();
                      verifyHashOnLoad();
                    },1000);
                },
                onFailure: function (data) {
                    log("Unable to Load SwaggerUI");
                },
                sorter: "alpha"
            });

            function addApiKeyAuthorization() {
                var key = encodeURIComponent($('#input_apiKey')[0].value);
                if (key && key.trim() != "") {
                    var apiKeyAuth = new SwaggerClient.ApiKeyAuthorization("authorization", "token " + key, "header");
                    window.swaggerUi.api.clientAuthorizations.add("authorization", apiKeyAuth);
                    log("added key " + key);
                }
            }

            $('#input_apiKey').change(addApiKeyAuthorization);
            // if you have an apiKey you would like to pre-populate on the page for demonstration purposes...
            /*
             var apiKey = "myApiKeyXXXX123456789";
             $('#input_apiKey').val(apiKey);
             */

            window.swaggerUi.load();

            function log() {
                if ('console' in window) {
                    console.log.apply(console, arguments);
                }
            }
        });
    </script>

    <script type="text/javascript">

        $(function () {

            $(window).scroll(function () {
                var sticky = $(".sticky-nav");

                i(sticky);
                r(sticky);

                function n() {
                    return window.matchMedia("(min-width: 992px)").matches
                }

                function e() {
                    n() ? sticky.parents(".sticky-nav-placeholder").removeAttr("style") : sticky.parents(".sticky-nav-placeholder").css("min-height", sticky.outerHeight())
                }

                function i(n) {
                    n.hasClass("fixed") || (navOffset = n.offset().top);
                    e();
                    $(window).scrollTop() > navOffset ? $(".modal.in").length || n.addClass("fixed") : n.removeClass("fixed")
                }

                function r(e) {
                    function i() {
                        var i = $(window).scrollTop(), r = e.parents(".sticky-nav");
                        return r.hasClass("fixed") && !n() && (i = i + r.outerHeight() + 40), i
                    }

                    function r(e) {
                        var t = o.next("[data-endpoint]"), n = o.prev("[data-endpoint]");
                        return "next" === e ? t.length ? t : o.parent().next().find("[data-endpoint]").first() : "prev" === e ? n.length ? n : o.parent().prev().find("[data-endpoint]").last() : []
                    }

                    var nav = e.find("[data-navigator]");
                    if (nav.find("[data-endpoint][data-selected]").length) {
                        var o = nav.find("[data-endpoint][data-selected]"),
                            a = $("#" + o.attr("data-endpoint")),
                            s = a.offset().top,
                            l = (s + a.outerHeight(), r("next")),
                            u = r("prev");
                        if (l.length) {
                            {
                                var d = $("#" + l.attr("data-endpoint")), f = d.offset().top;
                                f + d.outerHeight()
                            }
                            i() >= f && c(l)
                        }
                        if (u.length) {
                            var p = $("#" + u.attr("data-endpoint")),
                            g = u.offset().top;
                            v = (g + p.outerHeight(), 100);
                            i() < s - v && c(u)
                        }
                    }
                }

                function s() {
                    var e = $(".sticky-nav [data-navigator]"),
                        n = e.find("[data-endpoint]").first();
                    n.attr("data-selected", "");
                    u.find("[data-selected-value]").html(n.text())
                }

                function c(e) {
                    {
                        var n = $(".sticky-nav [data-navigator]");
                        $("#" + e.attr("data-endpoint"))
                    }
                    n.find("[data-resource]").removeClass("active");
                    n.find("[data-selected]").removeAttr("data-selected");
                    e.closest("[data-resource]").addClass("active");
                    e.attr("data-selected", "");
                    sticky.find("[data-selected-value]").html(e.text())
                }
            });

        });
    </script>

    <script type="text/javascript">
        $(function () {
            $("[data-toggle='tooltip']").tooltip();
        });
    </script>

</head>

<body class="page-docs" style="zoom: 1;">
<header class="site-header">
    <nav role="navigation" class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button type="button" data-toggle="collapse" data-target="#navbar-collapse" class="navbar-toggle"><span
                        class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span
                        class="icon-bar"></span><span class="icon-bar"></span></button>
                <h1 class="navbar-brand"><a href=""><span>Figshare documentation</span></a></h1>
            </div>
            <div id="navbar-collapse" class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-left">
                    <li class="li-why"><a href="#" style="font-size: 25px; padding-left: 0px"> API documentation</a></li>

                </ul>
            </div>
        </div>
    </nav>
</header>

<section class="content">
    <div class="figsh_loader"><div><img src="images/loader.gif" /></div></div>
    <div id="api2-explorer">
        <div class="swagger-section page-docs" style="zoom: 1">
            <div class="main-section">
                <div id="swagger-ui-container" class="swagger-ui-wrap">
                </div>
            </div>
        </div>
    </div>
    <div class="hidden_descriptions" style="display: none;">
      <div id="description_stats_service_intro">
        <p>The fig<strong>share</strong> statistics service is available at https://stats.figshare.com and
        it supports retrieving information about the number of <em>views</em>, <em>downloads</em> and <em>shares</em>
        related to items available of fig<strong>share</strong>. From here on, an event is one of <em>view</em>,
        <em>download</em> or <em>share</em>.</p>
        <p>All communication with the service is done through <em>https</em> and all data is encoded as <em>json</em>.
        Optional authorization for specific endpoints is done through basic access authentication.</p>
        <ul>
        <li><a href="#authentication">Authentication</a></li>
        <li><a href="#errors">Errors</a></li>
        <li><a href="#endpoints">Endpoints</a></li>
        </ul>
      </div>
      <div id="description_stats_service_auth">
        <h2 id="authentication">Authentication</h2>
        <p>For some specialized endpoints, access to institution specific statistics requires
        sending a <code>base64</code>-encoded pair of <code>username:password</code> in the basic authorization header:</p>
        <pre><code class="http">GET https://stats.figshare.com/lboro/top/views/article
        Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
        </code></pre>

        <p>Please note that the analogous endpoint for retrieving statistics for items outside
        the institutional scope, requires no authentication:</p>
        <pre><code class="http">GET https://stats.figshare.com/top/views/article
        </code></pre>
      </div>
      <div id="description_stats_service_errors">
        <h2 id="errors">Errors</h2>
        <p>Error responses are common for all endpoints and are presented below.</p>
        <p>Each error response will have a specific HTTP status code and a JSON body with the
        following fields</p>
        <table>
        <thead>
        <tr>
        <th>Field</th>
        <th>Description</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>message</td>
        <td>A human friendly message explaining the error.</td>
        </tr>
        <tr>
        <td>code</td>
        <td>A machine friendly error code, used by the dev team to identify the error.</td>
        </tr>
        <tr>
        <td>data</td>
        <td>An object containing extra information about the error.</td>
        </tr>
        </tbody>
        </table>
        <h3 id="400-bad-request">400 Bad Request</h3>
        <p>This error response will be raised when an invalid field is sent in the parameters of the
        request or when a field is missing from the parameters of the request. Required and
        optional fields in the body are documented for each endpoint, where applicable.</p>
        <h3 id="403-forbidden">403 Forbidden</h3>
        <p>This error response is presented when attempting to retrieve information from a protected endpoint
        without the appropriate <code>Authorization</code> header.</p>
        <h3 id="404-not-found">404 Not Found</h3>
        <p>This error response is presented when attempting to access a non existing endpoint. Please note
        that it will not be raised when attempting to gather statistics for an item which doesn't
        exist on <strong>fig</strong>share, instead an appropriate empty result will be returned.</p>
      </div>
      <div id="description_stats_service_endpoints">
        <h2 id="endpoints">Endpoints</h2>
        <p>The statistics service endpoints can be classified in 4 categories:</p>
        <ul>
        <li><a href="#stats_service_endpoints_totals">Totals</a></li>
        <li><a href="#stats_service_endpoints_timeline">Timeline</a></li>
        <li><a href="#stats_service_endpoints_breakdown">Breakdown</a></li>
        <li><a href="#stats_service_endpoints_tops">Tops</a></li>
        </ul>
        <h3 id="scope">Scope</h3>
        <p>All endpoints are applicable for the following items:</p>
        <ul>
        <li><strong>group</strong>: events on items inside the specified group</li>
        <li><strong>author</strong>: events on items authored by the specified user</li>
        <li><strong>article</strong>: events on the specified article</li>
        <li><strong>project</strong>: events on the specified project</li>
        <li><strong>collection</strong>: events on the specified collection</li>
        </ul>
        <h3 id="stats_service_endpoints_totals">Totals</h3>
        <p>This type of endpoint enables the retrieval of the total number of events for a specific item.
        More details and examples are provided <a href="#stats_totals">here</a>.</p>
        <h3 id="stats_service_endpoints_timeline">Timeline</h3>
        <p>This type of endpoint enables the retrieval of a timeline of the number of events for a specific
        item, with a specified granularity. More details and examples are provided <a href="#stats_timeline">here</a>.</p>
        <h3 id="stats_service_endpoints_breakdown">Breakdown</h3>
        <p>This type of endpoint enables the retrieval of a geo-location breakdown of the number of events for a specific
        item, with a specified granularity. More details and examples are provided <a href="#stats_breakdown">here</a>.</p>
        <h3 id="stats_service_endpoints_tops">Tops</h3>
        <p>This type of endpoint enables the retrieval of rankings of the most viewed, downloaded or shared items,
        over a specific period of time. More details and examples are provided <a href="#stats_tops">here</a>.</p>
      </div>
      <div id="description_stats_breakdown_endpoints">
        <h1 id="endpoints-for-retrieving-a-breakdown">Endpoints for retrieving a <strong>breakdown</strong></h1>
        <p>This type of endpoint enables the retrieval of a geo-location breakdown of the number
        of <em>views</em>, <em>downloads</em> or <em>shares</em> for a specific item.</p>
        <ul>
        <li><a href="#stats_breakdown_authorization">Authorization</a></li>
        <li><a href="#stats_breakdown_endpoint_format">Endpoint format</a></li>
        <li><a href="#stats_breakdown_request_parameters">Request parameters</a></li>
        <li><a href="#stats_breakdown_examples">Examples</a></li>
        </ul>
      </div>
      <div id="description_stats_breakdown_auth">
        <h2 id="authorization">Authorization</h2>
        <p>Basic HTTP authentication is required for timeline endpoints within the scope of an institution.</p>
      </div>
      <div id="description_stats_breakdown_format">
        <h2 id="endpoint-format">Endpoint format</h2>
        <p>For items outside an institution scope the endpoints have the format:</p>
        <pre><code>/breakdown/{granularity}/{counter}/{item}/{item_id}
        </code></pre>

        <p>and inside an institution scope they have the format:</p>
        <pre><code>/{institution}/breakdown/{granularity}{counter}/{item}/{item_id}
        </code></pre>

        <p>where <strong>granularity</strong> is one of <code>year</code>, <code>month</code>, <code>day</code> or <code>total</code>,
        <strong>counter</strong> is one of <code>views</code>, <code>downloads</code> or <code>shares</code>
        and <strong>item</strong> is one of <code>article</code>, <code>author</code>, <code>collection</code>, <code>group</code> or <code>project</code>.</p>
        <p>The results on this endpoint can be filtered further by a <code>start_date</code> and <code>end_date</code> and
        a specified <code>category</code> or <code>item_type</code>. By default, <code>start_date</code> and <code>end_date</code> are set
        to reflect the events of the last month. The supplementary filters can be provided in the
        query parameters of the request.</p>
      </div>
      <div id="description_stats_breakdown_params">
        <h2 id="request-parameters">Request parameters</h2>
        <p>The following table describes the optional parameters:</p>
        <table>
        <thead>
        <tr>
        <th>Parameter</th>
        <th>Comments</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><code>start_date</code></td>
        <td>By default this is set to the 1st of the current month.</td>
        </tr>
        <tr>
        <td><code>end_date</code></td>
        <td>By default this is set to today.</td>
        </tr>
        <tr>
        <td><code>sub_item</code></td>
        <td>Can be one of <code>category</code> and <code>item_type</code>. Acts as a filter on the result.</td>
        </tr>
        <tr>
        <td><code>sub_item_id</code></td>
        <td>Required if <code>sub_item</code> is also specified.</td>
        </tr>
        </tbody>
        </table>
      </div>
      <div id="description_stats_breakdown_examples">
        <h2 id="examples">Examples</h2>
        <h3 id="daily-breakdown-of-shares-for-an-unaffiliated-article">Daily breakdown of views for an unaffiliated article</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/breakdown/day/views/article/766364?start_date=2017-04-19&end_date=2017-04-21</code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

  {
    "breakdown": {
        "2017-04-20": {
            "United States": {
                "Bellevue": 1,
                "Fayetteville": 2,
                "total": 7,
                "Wilmington": 3,
                "Everett": 1
            },
            "Netherlands": {
                "Unknown": 1,
                "total": 2,
                "Venlo": 1
            },
            "Pakistan": {
                "Karachi": 2,
                "total": 2
            },
            "South Africa": {
                "Johannesburg": 2,
                "total": 2
            },
            "United Kingdom": {
                "Grimsby": 1,
                "Southampton": 1,
                "Liverpool": 1,
                "Unknown": 2,
                "Huntingdon": 1,
                "Falkirk": 1,
                "Middlesbrough": 1,
                "London": 1,
                "Oxford": 1,
                "Colchester": 1,
                "total": 12
            },
            "Ethiopia": {
                "Unknown": 2,
                "total": 2
            },
            "Sweden": {
                "total": 2,
                "Avesta": 2
            },
            "Australia": {
                "Unknown": 1,
                "total": 2,
                "Darwin": 1
            },
            "Ireland": {
                "total": 2,
                "Dublin": 2
            },
            "Japan": {
                "total": 1,
                "Tokyo": 1
            }
        },
        "2017-04-19": {
            "Brazil": {
                "Unknown": 1,
                "total": 1
            },
            "United Kingdom": {
                "Coventry": 1,
                "Unknown": 1,
                "Twickenham": 1,
                "Canterbury": 1,
                "Huddersfield": 1,
                "total": 5
            },
            "Netherlands": {
                "Babberich": 1,
                "total": 3,
                "Unknown": 1,
                "Enschede": 1
            },
            "Canada": {
                "total": 1,
                "Niagara Falls": 1
            },
            "Egypt": {
                "Unknown": 2,
                "total": 2
            },
            "United Arab Emirates": {
                "Dubai": 2,
                "total": 2
            },
            "France": {
                "total": 2,
                "Nantes": 2
            },
            "United States": {
                "Unknown": 3,
                "Kansas City": 1,
                "Mountain View": 1,
                "San Francisco": 1,
                "total": 7,
                "Pomona": 1
            },
            "Australia": {
                "Perth": 1,
                "total": 6,
                "Darwin": 1,
                "Sydney": 3,
                "Unknown": 1
            },
            "Chile": {
                "Osorno": 1,
                "total": 1
            }
        }
    }
}
</code></pre>

        <h3 id="yearly-breakdown-of-views-for-a-project-associated-to-an-institution">Yearly breakdown of views for an article</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/breakdown/year/views/article/766364?start_date=2015-04-19&end_date=2016-04-21</code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8
{
    "breakdown": {
        "2015": {
            "Canada": {
                "Toronto": 120,
                "Edmonton": 35,
                "Burnaby": 15,
                "Ottawa": 46,
                "London": 20,
                "Vancouver": 45,
                "Unkown": 49,
                "Calgary": 19,
                "Hamilton": 26,
                "total": 688,
                "Montreal": 36
            },
            "United Kingdom": {
                "Edinburgh": 97,
                "Liverpool": 47,
                "Sheffield": 58,
                "Leeds": 44,
                "Unkown": 253,
                "Nottingham": 56,
                "Manchester": 78,
                "London": 280,
                "total": 1957,
                "Birmingham": 51,
                "Glasgow": 37
            },
            "Australia": {
                "Bundoora": 16,
                "Clayton North": 22,
                "Canberra": 21,
                "Brisbane": 153,
                "Unkown": 249,
                "Melbourne": 109,
                "Perth": 99,
                "Sydney": 114,
                "Streaky Bay": 20,
                "total": 1355,
                "Adelaide": 62
            },
            "Singapore": {
                "total": 195,
                "Unkown": 13,
                "Singapore": 182
            },
            "Unknown": {
                "Unknown": 331,
                "total": 345,
                "Unkown": 14
            },
            "India": {
                "New Delhi": 11,
                "Pune": 8,
                "Chennai": 9,
                "Mumbai": 42,
                "Delhi": 10,
                "Unkown": 30,
                "Chandigarh": 4,
                "Hyderabad": 10,
                "Kolkata": 7,
                "Bangalore": 13,
                "total": 191
            },
            "United States": {
                "Phoenix": 33,
                "Mountain View": 633,
                "Washington": 36,
                "Unkown": 232,
                "Brooklyn": 31,
                "New York": 46,
                "Los Angeles": 43,
                "Boston": 40,
                "San Francisco": 81,
                "total": 3415,
                "Baltimore": 32
            },
            "Netherlands": {
                "Groningen": 10,
                "total": 161,
                "The Hague": 4,
                "Amstelveen": 4,
                "Unkown": 26,
                "Maastricht": 8,
                "Utrecht": 9,
                "Nijmegen": 4,
                "Amsterdam": 17,
                "Rotterdam": 14,
                "Enschede": 5
            },
            "Ireland": {
                "Galway": 22,
                "Sligo": 3,
                "Navan": 2,
                "Drogheda": 2,
                "Limerick": 5,
                "Dublin": 84,
                "Unkown": 67,
                "Cork": 28,
                "Ballina": 1,
                "Naas": 2,
                "total": 226
            },
            "Denmark": {
                "Nibe": 2,
                "Svendborg": 2,
                "Odense": 40,
                "Aalborg": 3,
                "Lyngby": 2,
                "Unkown": 17,
                "Bronshoj": 4,
                "Aarhus": 19,
                "Frederiksberg": 8,
                "Copenhagen": 15,
                "total": 129
            }
        },
        "2016": {
            "Canada": {
                "Toronto": 43,
                "Hamilton": 8,
                "Ottawa": 20,
                "Saskatoon": 10,
                "Vancouver": 15,
                "Unkown": 11,
                "Calgary": 11,
                "London": 9,
                "total": 277,
                "Windsor": 15,
                "Montreal": 19
            },
            "United Kingdom": {
                "Liverpool": 41,
                "Unknown": 60,
                "Leeds": 30,
                "Unkown": 165,
                "Nottingham": 29,
                "Newcastle upon Tyne": 53,
                "Manchester": 82,
                "London": 211,
                "total": 1487,
                "Birmingham": 34,
                "Glasgow": 24
            },
            "Netherlands": {
                "Groningen": 7,
                "Rotterdam": 5,
                "The Hague": 4,
                "Leiden": 4,
                "Unkown": 24,
                "Centrum": 3,
                "Maastricht": 8,
                "Utrecht": 7,
                "Unknown": 4,
                "Amsterdam": 15,
                "total": 113
            },
            "India": {
                "Kumar": 2,
                "Chennai": 6,
                "Mumbai": 21,
                "Delhi": 10,
                "Unkown": 12,
                "Secunderabad": 2,
                "Jaipur": 2,
                "New Delhi": 2,
                "Kolkata": 3,
                "Bangalore": 10,
                "total": 85
            },
            "France": {
                "Lyon": 1,
                "Cr\u00e9teil": 1,
                "Lille": 1,
                "Paris": 3,
                "Unknown": 74,
                "Bondy": 2,
                "Unkown": 12,
                "Fontenay-aux-Roses": 2,
                "total": 101,
                "Caen": 1,
                "Mouguerre": 1
            },
            "United States": {
                "Redmond": 80,
                "Los Angeles": 20,
                "Chicago": 20,
                "Unknown": 38,
                "Unkown": 103,
                "New York": 19,
                "Denver": 20,
                "Sunnyvale": 24,
                "Mountain View": 485,
                "San Francisco": 64,
                "total": 1730
            },
            "Australia": {
                "Bundoora": 9,
                "Burwood": 7,
                "Bentley": 4,
                "Brisbane": 76,
                "Unknown": 70,
                "Unkown": 74,
                "Melbourne": 27,
                "Perth": 38,
                "Sydney": 59,
                "total": 540,
                "Adelaide": 20
            },
            "Germany": {
                "Hanover": 2,
                "Unknown": 4,
                "Munich": 12,
                "Cologne": 3,
                "Stuttgart": 4,
                "Berlin": 8,
                "Unkown": 26,
                "Dortmund": 2,
                "total": 92,
                "Karlsruhe": 3,
                "Bonn": 2
            },
            "Ireland": {
                "Ballivor": 1,
                "Galway": 12,
                "Unknown": 4,
                "Limerick": 7,
                "Dublin": 34,
                "Athlone": 14,
                "Cork": 3,
                "Unkown": 20,
                "Waterford": 2,
                "Letterkenny": 2,
                "total": 105
            },
            "New Zealand": {
                "Auckland": 31,
                "Unknown": 2,
                "Wellington": 5,
                "Unkown": 7,
                "Tauranga": 2,
                "Hamilton": 8,
                "Christchurch": 9,
                "total": 75,
                "Dunedin": 4,
                "Hunterville": 1,
                "Hastings": 1
            }
        }
    }
}
</code></pre>

        <h3 id="total-breakdown-of-downloads-from-filesets-found-in-a-specified-institutional-group">Total breakdown of downloads from filesets found in a specified institutional group</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/lboro/breakdown/total/downloads/group/17?sub_item=item_type&amp;sub_item_id=fileset&amp;start_date=2015-02-11&amp;end_date=2015-05-17
Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;breakdown&quot;: {
    &quot;total&quot;: {
      &quot;Spain&quot;: {
        &quot;Seville&quot;: 6,
        &quot;Barcelona&quot;: 7,
        &quot;Madrid&quot;: 3,
        &quot;total&quot;: 16
      },
      &quot;China&quot;: {
        &quot;Chengdu&quot;: 7,
        &quot;Fuzhou&quot;: 4,
        &quot;total&quot;: 11
      },
      &quot;United States&quot;: {
        &quot;Kansas City&quot;: 3,
        &quot;Orlando&quot;: 7,
        &quot;total&quot;: 10
      },
      &quot;Brazil&quot;: {
        &quot;total&quot;: 2,
        &quot;Indaiatuba&quot;: 2
      }
    }
  }
}
</code></pre>

        <h3 id="monthly-breakdown-of-views-from-projects-found-in-a-specified-institutional-group">Monthly breakdown of views from projects found in a specified institutional group</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/melbourne/breakdown/month/views/group/234&amp;sub_item=item_type&amp;sub_item_id=project&amp;start_date=2015-02-11&amp;end_date=2015-03-17
Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;breakdown&quot;: {
    &quot;2015-02&quot;: {
      &quot;France&quot;: {
        &quot;Paris&quot;: 12,
        &quot;Montpellier&quot;: 7,
        &quot;total&quot;: 19
      },
      &quot;Germany&quot;: {
        &quot;Munich&quot;: 13,
        &quot;Frankfurt&quot;: 2,
        &quot;total&quot;: 15
      }
    },
    &quot;2015-03&quot;: {
      &quot;Spain&quot;: {
        &quot;Madrid&quot;: 3,
        &quot;Mallorca&quot;: 5,
        &quot;total&quot;: 8
      }
    }
  }
}
</code></pre>

        <h3 id="breakdown-of-institutional-statistics-with-missing-authorization">Breakdown of institutional statistics with missing authorization</h3>
        <p><strong><em>Request</em></strong></p>
        <pre><code class="http">GET https://stats.figshare.com/melbourne/breakdown/month/views/group/234
        </code></pre>

        <p><strong><em>Response</em></strong></p>
<pre><code class="http">HTTP/1.1 403 Forbidden
Content-Type: application/json; charset=UTF-8

{
  &quot;data&quot;: null,
  &quot;code&quot;: &quot;Forbidden&quot;,
  &quot;message&quot;: &quot;Unauthorized request&quot;
}
</code></pre>
      </div>
      <div id="description_stats_timeline_endpoints">
        <h1 id="endpoints-for-retrieving-a-timeline">Endpoints for retrieving a <strong>timeline</strong></h1>
        <p>This type of endpoint enables the retrieval of a timeline of the number of <em>views</em>, <em>downloads</em>
        or <em>shares</em> for a specific item.</p>
        <ul>
        <li><a href="#stats_timeline_authorization">Authorization</a></li>
        <li><a href="#stats_timeline_endpoint_format">Endpoint format</a></li>
        <li><a href="#stats_timeline_request_parameters">Request parameters</a></li>
        <li><a href="#stats_timeline_examples">Examples</a></li>
        </ul>
      </div>
      <div id="description_stats_timeline_auth">
        <h2 id="authorization">Authorization</h2>
        <p>Basic HTTP authentication is required for timeline endpoints within the scope of an institution.</p>
      </div>
      <div id="description_stats_timeline_format">
        <h2 id="endpoint-format">Endpoint format</h2>
        <p>For items outside an institution scope the endpoints have the format:</p>
        <pre><code>/timeline/{granularity}/{counter}/{item}/{item_id}

        </code></pre>

        <p>and inside an institution scope they have the format:</p>
        <pre><code>/{institution}/timeline/{granularity}{counter}/{item}/{item_id}
        </code></pre>

        <p>where <strong>granularity</strong> is one of <code>year</code>, <code>month</code>, <code>day</code> or <code>total</code>
        , <strong>counter</strong> is one of <code>views</code>, <code>downloads</code> or <code>shares</code>
        and <strong>item</strong> is one of <code>article</code>, <code>author</code>, <code>collection</code>, <code>group</code> or <code>project</code>.</p>
        <p>The results on this endpoint can be filtered further by a <code>start_date</code> and <code>end_date</code> and
        a specified <code>category</code> or <code>item_type</code>. By default, <code>start_date</code> and <code>end_date</code> are set
        to reflect the events of the last month. The supplementary filters can be provided in the
        request parameters.</p>
      </div>
      <div id="description_stats_timeline_params">
        <h2 id="request-parameters">Request parameters</h2>
        <p>The following table describes the optional parameters:</p>
        <table>
        <thead>
        <tr>
        <th>Parameter</th>
        <th>Comments</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><code>start_date</code></td>
        <td>By default this is set to the 1st of the current month.</td>
        </tr>
        <tr>
        <td><code>end_date</code></td>
        <td>By default this is set to today.</td>
        </tr>
        <tr>
        <td><code>sub_item</code></td>
        <td>Can be one of <code>category</code> and <code>item_type</code>. Acts as a filter on the result.</td>
        </tr>
        <tr>
        <td><code>sub_item_id</code></td>
        <td>Required if <code>sub_item</code> is also specified.</td>
        </tr>
        </tbody>
        </table>
      </div>
      <div id="description_stats_timeline_examples">
        <h2 id="examples">Examples</h2>
        <h3 id="daily-timeline-of-downloads-for-an-unaffiliated-article">Daily timeline of downloads for an unaffiliated article</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/timeline/day/downloads/article/766364
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
"timeline": {
    "2015-11-19": 11,
    "2015-11-18": 4,
    "2015-11-11": 15,
    "2015-11-10": 13,
    "2015-11-13": 2,
    "2015-11-12": 4,
    "2015-11-15": 8,
    "2015-11-14": 2,
    "2015-11-17": 11,
    "2015-11-16": 11,
  }
}
</code></pre>


        <h3 id="yearly-timeline-of-views-for-an-article-associated-to-an-institution">Yearly timeline of views for an article</h3>
        <p><strong>Request</strong></p>

        <pre><code class="http">GET https://stats.figshare.com/timeline/year/views/article/766364
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
    "timeline": {
        "2015": 14305,
        "2014": 6867,
        "2017": 6923,
        "2016": 17026,
        "2013": 967
    }
}
</code></pre>

        <h3 id="monthly-timeline-of-shares-for-items-in-a-specified-institutional-group-matching-a-specified-category">Monthly timeline of shares for items in a specified institutional group, matching a specified category</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/monash/timeline/month/shares/group/10?sub_item=category&amp;sub_item_id=2&amp;start_date=2014-01-03&amp;end_date=2014-05-12
Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;timeline&quot;: {
    &quot;2014-01&quot;: 3,
    &quot;2014-02&quot;: 5,
    &quot;2014-03&quot;: 18,
    &quot;2014-04&quot;: 4,
    &quot;2014-05&quot;: 2
  }
}
</code></pre>

        <h3 id="daily-timeline-of-views-for-datasets-found-in-a-specified-institutional-group">Daily timeline of views for datasets found in a specified institutional group</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/monash/timeline/day/views/group/10?sub_item=item_type&amp;sub_item_id=dataset&amp;start_date=2014-03-01&amp;end_date=2014-03-04
Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;timeline&quot;: {
    &quot;2014-03-01&quot;: 10,
    &quot;2014-03-02&quot;: 14,
    &quot;2014-03-03&quot;: 15,
    &quot;2014-03-04&quot;: 9
  }
}
</code></pre>

        <h3 id="total-timeline-of-views-for-a-collection-associated-to-an-institution">Total timeline of views for a collection associated to an institution</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/lboro/timeline/total/views/collection/15?start_date=2014-01-02&amp;end_date=2014-03-05
Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;timeline&quot;: {
    &quot;total&quot;: 10
  }
}
</code></pre>

        <h3 id="timeline-with-missing-request-parameter">Timeline with missing request parameter</h3>
        <p><strong>Request</strong>*</p>
        <pre><code class="http">GET https://stats.figshare.com/lboro/timeline/month/views/group/1?sub_item=category&amp;start_date=2014-01-01&amp;end_date=2015-02-03
Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 400 Bad Request
Content-Type: application/json; charset=UTF-8

{
  &quot;data&quot;: {
    &quot;missing_params&quot;: &quot;sub_item_id&quot;,
    &quot;parameters&quot;: {
      &quot;end_date&quot;: &quot;2015-02-03&quot;,
      &quot;start_date&quot;: &quot;2014-01-01&quot;,
      &quot;sub_item&quot;: &quot;category&quot;
    },
    &quot;path&quot;: &quot;/lboro/timeline/month/views/group/1&quot;
  },
  &quot;code&quot;: &quot;MissingParams&quot;,
  &quot;message&quot;: &quot;Missing required params: sub_item_id&quot;
}
</code></pre>

      </div>
      <div id="description_stats_tops_endpoints">
        <h1 id="endpoints-for-retrieving-tops">Endpoints for retrieving <strong>tops</strong></h1>
        <p>This type of endpoints enables the retrieval or rankings of the most viewed, downloaded or shared
        items, over a specific period of time.</p>
        <ul>
        <li><a href="#stats_tops_authorization">Authorization</a></li>
        <li><a href="#stats_tops_endpoint_format">Endpoint format</a></li>
        <li><a href="#stats_tops_request_parameters">Request parameters</a></li>
        <li><a href="#stats_tops_examples">Examples</a></li>
        </ul>
      </div>
      <div id="description_stats_tops_auth">
        <h2 id="authorization">Authorization</h2>
        <p>Basic HTTP authentication is required for timeline endpoints within the scope of an institution.</p>
      </div>
      <div id="description_stats_tops_format">
        <h2 id="endpoint-format">Endpoint format</h2>
        <p>For items outside an institution scope the endpoints have the format:</p>
        <pre><code>/top/{counter}/{item}
        </code></pre>

        <p>and inside and institution scope they have the format:</p>
        <pre><code>/{institution}/top/{counter}/{item}
        </code></pre>

        <p>where <strong>counter</strong> is one of <code>views</code>, <code>shares</code> or <code>downloads</code> and <strong>item</strong> is one of <code>article</code>, <code>author</code>, <code>collection</code>, <code>group</code> or <code>project</code>.</p>
        <p>The results on this endpoint can be filtered further by a specified <code>sub_item</code>
        which can be one of: <code>category</code>, <code>item_type</code> or <code>referral</code>. The results can also be filtered
        by a <code>start_date</code> and <code>end_date</code> which by default are set to reflect the events of the last
        month <strong>ONLY</strong> if a <code>sub_item</code> filter has been specified. Otherwise, the results will reflect
        the total events.
        The number of results in the ranking can be specified as the <code>count</code> parameter which
        by default is set to<code>10</code>. The supplementary filters and options can be provided in the query
        parameters of the request.</p>
      </div>
      <div id="description_stats_tops_params">
        <h2 id="request-parameters">Request parameters</h2>
        <p>The following table describes the optional parameters:</p>
        <table>
        <thead>
        <tr>
        <th>Parameter</th>
        <th>Comments</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td><code>start_date</code></td>
        <td>By default this is set to the 1st of the current month if a <code>sub_item</code> is specified</td>
        </tr>
        <tr>
        <td><code>end_date</code></td>
        <td>By default this is set to today if a <code>sub_item</code> is specified.</td>
        </tr>
        <tr>
        <td><code>sub_item</code></td>
        <td>Can be one of <code>category</code>, <code>item_type</code> or <code>referral</code>. Acts as a filter on the result.</td>
        </tr>
        <tr>
        <td><code>count</code></td>
        <td>By default this is set to 10.</td>
        </tr>
        </tbody>
        </table>
      </div>
      <div id="description_stats_tops_examples">
        <h2 id="examples">Examples</h2>
        <h3 id="top-10-most-viewed-unaffiliated-articles-in-the-last-month">Top 10 most viewed unaffiliated articles in the last month</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/top/views/article
        </code></pre>

        <p><strong>Response</strong></p>

<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
    "top": {
        "1130885": 31334,
        "1256369": 32128,
        "2064072": 65819,
        "1286826": 25929,
        "653676": 33393,
        "4291565": 36494,
        "1018769": 46370,
        "1031637": 36428,
        "766364": 46088,
        "3413821": 39133
    }
}
</code></pre>


        <h3 id="top-3-most-viewed-categories-in-a-specified-institutional-group-in-2014">Top 3 most viewed categories in a specified institutional group in 2014</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/monash/top/views/group?item_id=2&amp;sub_item=category&amp;count=3&amp;start_date=2014-01-01&amp;end_date=2014-12-31
Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;top&quot;: {
    &quot;2&quot;: 12351,
    &quot;7&quot;: 11001,
    &quot;3&quot;: 10435
  }
}
</code></pre>

        <h3 id="top-2-referrals-for-a-specific-unaffiliated-project-in-the-last-month">Top 2 referrals for a specific unaffiliated project in the last month</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/top/views/project?item_id=13&amp;count=2&amp;sub_item=referral
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;www.google.com&quot;: 212,
  &quot;www.figshare.com&quot;: 175
}
</code></pre>

        <h3 id="top-3-item-types-for-shares-related-to-a-specific-unaffiliated-author">Top 3 item types for shares related to a specific unaffiliated author</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/top/shares/author?item_id=13456&amp;count=3&amp;sub_item=item_type
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;fileset&quot;: 135,
  &quot;collection&quot;: 120,
  &quot;figure&quot;: 98
}
</code></pre>
      </div>
      <div id="description_stats_totals_endpoints">
        <h1 id="endpoints-for-retrieving-totals">Endpoints for retrieving <strong>totals</strong></h1>
        <p>This type of endpoint provides the total number of <em>views</em>, <em>downloads</em> or <em>shares</em>.</p>
        <ul>
        <li><a href="#stats_totals_authorization">Authorization</a></li>
        <li><a href="#stats_totals_endpoint_format">Endpoint format</a></li>
        <li><a href="#stats_totals_examples">Examples</a></li>
        </ul>
      </div>
      <div id="description_stats_totals_auth">
        <h2 id="authorization">Authorization</h2>
        <p>No authorization is required.</p>
      </div>
      <div id="description_stats_totals_format">
        <h2 id="endpoint-format">Endpoint format</h2>
        <p>For items outside an institution scope the endpoints have the format:</p>
        <pre><code>/total/{counter}/{item}/{item_id}
        </code></pre>

        <p>and inside an institution scope they have the format:</p>
        <pre><code>/{institution}/total/{counter}/{item}/{item_id}
        </code></pre>

        <p>where <strong>counter</strong> is one of <code>views</code>, <code>downloads</code> or <code>shares</code> and <strong>item</strong> is one of <code>article</code>, <code>author</code>, <code>collection</code>, <code>group</code> or <code>project</code>.</p>
      </div>
      <div id="description_stats_totals_examples">
        <h2 id="examples">Examples</h2>
        <h3 id="number-of-views-for-an-unaffiliated-article">Number of views for an unaffiliated article</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/total/views/article/23
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;totals&quot;: 231
}
</code></pre>

        <h3 id="number-of-shares-for-items-authored-by-a-specific-user">Number of shares for items authored by a specific user</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/total/shares/author/15
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;totals&quot;: 134
}
</code></pre>

        <h3 id="number-of-downloads-for-items-in-an-institutional-group">Number of downloads for items in an institutional group</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/monash/total/downloads/group/10
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;totals&quot;: 5
}
</code></pre>

        <h3 id="number-of-views-for-a-collection-associated-to-an-institution">Number of views for a collection associated to an institution</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/lboro/total/views/collection/15
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
  &quot;totals&quot;: 3
}
</code></pre>

        <h3 id="unsupported-counter-request-for-an-unaffiliated-article">Unsupported counter request for an unaffiliated article</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">GET https://stats.figshare.com/total/hugs/article/215
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 400 Bad Request
Content-Type: application/json; charset=UTF-8

{
  &quot;data&quot;: {
    &quot;extra&quot;: &quot;Counter type not supported: hugs&quot;,
    &quot;invalid_params&quot;: &quot;counter&quot;
  },
  &quot;code&quot;: &quot;InvalidParams&quot;,
  &quot;message&quot;: &quot;Invalid or unsupported params: counter&quot;
}
</code></pre>
      </div>
      <div id="description_stats_count_endpoints">
        <h1 id="endpoints-for-retrieving-totals">Endpoints for retrieving number of articles in public groups</h1>
        <p>This type of endpoint provides a way to get the number of articles in one or more public groups.</p>
        <ul>
        <li><a href="#stats_totals_authorization">Authorization</a></li>
        <li><a href="#stats_totals_endpoint_format">Endpoint format</a></li>
        <li><a href="#stats_totals_examples">Examples</a></li>
        </ul>
      </div>
      <div id="description_stats_count_auth">
        <h2 id="authorization">Authorization</h2>
        <p>No authorization is required.</p>
      </div>
      <div id="description_stats_count_format">
        <h2 id="endpoint-format">Endpoint format</h2>
        <pre><code>/count/articles
        </code></pre>
      </div>
      <div id="description_stats_count_examples">
        <h2 id="examples">Example</h2>
        <h3 id="number-of-views-for-an-unaffiliated-article">Number of articles in groups with ids 327, 328, 329</h3>
        <p><strong>Request</strong></p>
        <pre><code class="http">POST https://stats.figshare.com/count/articles
        </code></pre>
        <p><strong>Request Body</strong></p>
        <pre><code class="http">
{
   "groups": [
       {"id":327},
       {"id":328},
       {"id":329}
   ]
}
        </code></pre>

        <p><strong>Response</strong></p>
<pre><code class="http">HTTP/1.1 200 OK
Content-Type: application/json; charset=UTF-8

{
    "327": 20,
    "328": 1,
    "329": 1
}
</code></pre>
      </div>
      <div id="description_search_intro">
        <h2>How to find data on figshare</h2>
        <p>Data appears on the portal homepage with the newest uploads appearing first, you also have the option to browse by Popular content and Categories. Categories will only appear available for browsing if there are public items with the category assigned.</p>
      </div>
      <div id="description_search_operators">
        <h2>Search operators</h2>
        <p>figshare supports a predefined set of characters for the main search operators and for phrase searches.</p>
        <table>
        <thead>
        <tr>
        <th>Operator</th>
        <th>Supported characters</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>AND</td>
        <td>AND</td>
        </tr>

        <tr>
        <td>OR</td>
        <td>OR</td>
        </tr>
        <tr>
        <td>NOT</td>
        <td>NOT</td>
        </tr>
        <tr>
        <td>field delimiter</td>
        <td>:</td>
        </tr>
        <tr>
        <td>phrase search delimiter</td>
        <td>" "</td>
        </tr>
        <tr>
        <td>grouping</td>
        <td>( )</td>
        </tr>
        </tbody>
        </table>

      </div>
      <div id="description_search_attributes">
        <h2>Searchable attributes</h2>
        <p>You can build queries based on the following attributes:</p>
        <ul>
          <li>:title: - string (exact match),</li>
          <li>:description: - string (exact match),</li>
          <li>:tag: - string (exact match), the tag is the keyword used to describe an item such as ":tag: artificial intelligence"</li>
          <li>:category: - string (exact match),</li>
          <li>:author: - string (exact match),</li>
          <li>:item_type:  - string, can be one of the following: [article, project, collection, dataset, figure, poster, media, presentation, paper, fileset, thesis, code]</li>
          <li>:search_term: - string (will search in all fields and match phrase)</li>
          <li>:orcid: - string (exact match)</li>
          <li>:extension: - string (exact match for the file extensions)</li>
          <li>:references: - string (exact match)</li>
          <li>:doi: - string (exact match)</li>
          <li>:institution: - string, this is only for institutions that have figshare and you would use the string id from the URL (for example, Loughborough University has the URL https://lboro.figshare.com/ and you would type ":institutions: lboro" into the search bar)</li>
          <li>:project: - string (exact match)</li>
          <li>:published_before: - string (exact match)</li>
          <li>:published_after: - string (exact match)</li>
          <li>:licence: - string (exact match), for example ":licence: CCBY"</li>

          <li>:resource_doi: - string (exact match)</li>
          <li>:resource_title: - string (exact match)</li>
          <li>:resource_link: - string (exact match)</li>
        </ul>
        <p>In order for the search to filter the attribute the user must use the following syntax:  <strong>:tag: cell</strong></p>
      </div>
      <div id="description_search_quick">
        <h2>Quick Search</h2>
        <h3>Simple search</h3>
        <h4>Search string: cell</h4>
        <p>As a result of this search you will see all figshare articles that will contain the word "cell" in any of the metadata fields. The search will also return the articles that contain the term cells or all inflected words derived from the common stem.</p>

        <h3>Phrase search - phase 2</h3>
        <h4>Search string: "stem cell"</h4>
        <p>As a result of this search you will see all figshare articles that will contain the exact phrase "stem cell" in any of the metadata fields.</p>

        <h3>Multi term search</h3>
        <h4>Search string: cancer cells treatment</h4>
        <p>As a result of this search you will see all figshare articles that contain at least one of the query terms. The results will be ordered by relevance first ones being the ones that would be found in a phrase search if available.</p>
        <p>As explained also in the table above the space is used by the figshare search as an OR operator. The search will also return the articles that contain all inflected words derived from the common stems.</p>

      </div>
      <div id="description_search_advanced">
        <h2>Advanced Search</h2>
        <p>As the tags might contain special characters they will have a special treatment within the figshare search, where we would do an exact match. The examples below will illustrate how field search works in general and how is customised for tags.</p>
        <h4>Search string:  :tag: cancer cell</h4>
        <p>This search will return all articles with the exact tag cancer cell.</p>
        <h4>Search string:  :tag: music and puppets</h4>
        <p>This search will return all articles with the exact tag music and puppets. Only the operator AND will work as search delimiter.</p>
        <h4>Search string:  :tag: "scrf=(cpcm,solvent=benzene)"</h4>
        <p>This search will return all articles with the exact tag.</p>
        <h4>Search string:  :tag: cancer category chemistry</h4>
        <p>This search will return all articles with the exact tag "cancer category chemistry". If the user wants to break the tag and search also for a specific category please see Combined field search below.</p>
        <h4>Search string:  :title: environmental science</h4>
        <p>This search will return all articles that have at least one of the words in the title working as in field multi-term search by relevance.</p>
        <h4>Search string:  :title: Line balancing for improving production</h4>
        <p>Figshare engine will add the space where needed between the operator and the actual term<br />This search will return only the articles that have the specified phrase included in the title. As usual the search will return also with a lower priority results containing all inflected words derived from the common stems.</p>
        <h4>Search string:  :description: growth of Indian manufacturing sector</h4>
        <p>This search will return all articles that have at least one of the words from above contained in the description from the list above as multi-term search ordered by relevance. As usual, the search will return also with a lower priority results containing all inflected words derived from the common stems.</p>
        <h4>Search string: description: "industrial case study"</h4>
        <p>This search will return all articles that have the phrase from above contained in the description. As usual, the search will return also with a lower priority results containing all inflected words derived from the common stems.</p>
      </div>
      <div id="description_search_combined">
        <h2>Combined field search</h2>
        <h4>Search string:  :author: M. Hahnel  OR :author: J. Smith OR :Author:  Albert Einstein</h4>
        <p>This search will return all articles that have at least one of the authors from the list above.</p>
        <h4>Search string:  :title: Line balancing for improving production AND :tag: cancer cell</h4>
        <p>This search will return all results where the title matches phrase (multi term search by relevance) from above and has the "cancer cell" tag. As usual the search will return also with a lower priority results containing all inflected words derived from the common stems.</p>
        <h4>Search string:  :tag: chemistry applied AND :category: biochemistry</h4>
        <p>This search will return all results where the tag is chemistry applied and the category is biochemistry. As usual the search will return also with a lower priority results containing all inflected words derived from the common stems.</p>
      </div>
      <div id="description_search_complex">
        <h2>Complex searches</h2>
        <h4>Search string:  :title: science AND :tag: cell AND  :search term: private research</h4>
        <p>This search will return articles that have the word science in the title and the tag cell and has the expression private research in any metadata field.</p>
        <h4>Search string:  :title: law OR :tag: democrat AND :search term: respect</h4>
        <p>This search will return all articles that contain law in title or the tag democrat but also contain the word respect in any of the metadata fields.</p>
      </div>

      <div id="description_oauth_intro">
        <p>Since January 2016 figshare supports the <a href="http://tutorials.jenkov.com/oauth2/index.html">OAuth 2.0 Authorization Framework</a>. If you're new to OAuth make sure you have at least a basic understanding before moving on.</p>
      </div>
      <div id="description_oauth_quick">
        <h2 id="quick-guide">Quick guide</h2>
        <p>To receive a client id and secret you need to register an application in
        our system. You can easily do this from the <a href="https://figshare.com/account/applications">figshare applications
        page</a> in your account.</p>
        <h3 id="authorization-endpoint">Authorization endpoint</h3>
        <p>The authorization endpoint is located at
        <code>https://figshare.com/account/applications/authorize</code>. The endpoint
        supports both
        <a href="http://tools.ietf.org/html/rfc6749#section-4.1.1">authorization code grant</a> and <a href="http://tools.ietf.org/html/rfc6749#section-4.2">implicit grant</a>.</p>
        <h4 id="request-params">Request params</h4>
        <ul>
        <li><code>client_id</code></li>
        <li><code>response_type</code></li>
        <li><code>scope</code></li>
        <li><code>state</code></li>
        <li><code>redirect_uri</code></li>
        </ul>
        <h4 id="response-params">Response params</h4>
        <p>User is redirected back to <code>redirect_uri</code> with the following params
        added to the query:</p>
        <p><strong>Success</strong> as described in <a href="http://tools.ietf.org/html/rfc6749#section-4.1.2">rfc6749#section-4.1.2</a> or <a href="http://tools.ietf.org/html/rfc6749#section-4.2.2">rfc6749#section-4.2.2</a>:</p>
        <ul>
        <li><code>code</code></li>
        <li><code>state</code></li>
        </ul>
        <p><strong>Error</strong> as described in <a href="http://tools.ietf.org/html/rfc6749#section-4.1.2.1">rfc6749#4.1.2.1</a>:</p>
        <ul>
        <li><code>error</code></li>
        <li><code>error_description</code></li>
        </ul>
        <h3 id="token-endpoint">Token endpoint</h3>
        <p>The token endpoint is located at <code>https://api.figshare.com/v2/token</code>.
        In order to receive an access token you need to make a <code>POST</code> request.</p>
        <p>To get info about an existing access token use the <code>GET</code> method with the usual authorization means.</p>
        <h4 id="request">Request</h4>
        <p>Then endpoint accepts both <code>application/x-www-form-urlencoded</code> and
        <code>application/json</code> content types. It will only respond with JSON
        content.</p>
        <ul>
        <li><code>client_id</code></li>
        <li><code>client_secret</code></li>
        <li><code>grant_type</code></li>
        </ul>
        <p>and, based on the value of <code>grant_type</code>:</p>
        <ul>
        <li><code>code</code></li>
        <li><code>refresh_token</code></li>
        <li><code>username</code></li>
        <li><code>password</code></li>
        </ul>
        <h4 id="response">Response</h4>
        <p><strong>Successful responses are always <code>200</code> and failed ones are always <code>400</code>,
        even for failed authorization.</strong></p>
        <p><strong>Success</strong> response is a JSON as described in <a href="http://tools.ietf.org/html/rfc6749#section-5.1">http://tools.ietf.org/html/rfc6749#section-5.1</a>.</p>
        <ul>
        <li><code>access_token</code></li>
        <li><code>token_type</code></li>
        <li><code>expires_in</code></li>
        <li><code>refresh_token</code></li>
        <li><code>scope</code> - <em>not available yet</em></li>
        </ul>
        <p><strong>Error</strong> response as described in <a href="http://tools.ietf.org/html/rfc6749#section-5.2">rfc6749#section-5.2</a></p>
      </div>
      <div id="description_oauth_scope">
        <h2 id="scope">Scope</h2>
        <p>Currently the only scope available is <code>all</code> which grants full access to
        the resource owner's data. We're working on a more flexible approach.</p>
      </div>
      <div id="description_oauth_grant">
        <h2 id="grant-types">Grant Types</h2>
        <p>The supported grant types at this moment are:</p>
        <ul>
        <li><code>authorization_code</code></li>
        <li><code>refresh_token</code></li>
        <li><code>password</code></li>
        </ul>
      </div>
      <div id="description_intro">
        <p>The definite guide for figshare and the home of all user documentation.</p>
        <p>The sources for these pages are publicly hosted on github at <a href="https://github.com/figshare/user_documentation" target="_blank">figshare/user_documentation</a> and it's open for contributions. If you feel you can improve anything, fix a mistake, expand on a topic, feel free to open up a pull request.</p>
        <p>We are Open API compatible, you can download the Open API Swagger specification <a href="/swagger.json" target="_blank">here</a></p>
        <h3>Base URL</h3>
        <p>All URLs referenced in the documentation have the following base:</p>
        <pre>https://api.figshare.com/v2</pre>
        <p>The Figshare REST API is served over HTTPS. To ensure data privacy, unencrypted HTTP is not supported.</p>
        <h3>Authentication</h3>
        <p>Figshare supports the OAuth 2.0 Authorization Framework. See more about it in the <a href="#figshare_documentation_oauth">OAuth</a> section.
      </div>
      <div id="other_sample_codes">
        <h4>You can download one of the following complete clients:</h4>
        <ul class="other_sample_codes_list">
          <li><a target="_blank" href="/clients/java.zip">Java</a></li>
          <li><a target="_blank" href="/clients/csharp.zip">C#</a></li>
          <li><a target="_blank" href="/clients/php.zip">PHP</a></li>
          <li><a target="_blank" href="/clients/perl.zip">Perl</a></li>
          <li><a target="_blank" href="/clients/python.zip">Python</a></li>
          <li><a target="_blank" href="/clients/python-flask.zip">Python with Flask</a></li>
          <li><a target="_blank" href="/clients/go.zip">Golang</a></li>
          <li><a target="_blank" href="/clients/go-server.zip">Golang Server</a></li>
          <li><a target="_blank" href="/clients/javascript.zip">Javascript</a></li>
          <li><a target="_blank" href="/clients/javascript-closure-angular.zip">Javascript with Closure &amp; Angular</a></li>
          <li><a target="_blank" href="/clients/nodejs-server.zip">Node.js server</a></li>
          <li><a target="_blank" href="/clients/ruby.zip">Ruby</a></li>
          <li><a target="_blank" href="/clients/dynamic-html.zip">Dynamic Html Page</a></li>
          <li><a target="_blank" href="/clients/swift.zip">Swift</a></li>
          <li><a target="_blank" href="/clients/clojure.zip">Clojure</a></li>
          <li><a target="_blank" href="/clients/haskell.zip">Haskell</a></li>
        </ul>
      </div>
      <div id="description_upload_steps">
        <h3 id="steps-to-upload-file">Steps to upload file</h3>
        <ul>
          <li><a href="#private_article_upload_initiate">Initiate file upload</a> - this request returns an endpoint with file data</li>
          <li>Send a <code>GET</code> request to the <a href="#description_upload_api">Uploader Service</a> with the <code>upload_url</code> (which also contains the<code>upload_token</code>) provided in previous step and receive the number of file parts</li>
          <li>Upload / Delete / Retry uploading file parts until all parts are uploaded successfully</li>
          <li><a href="#private_article_upload_complete">Complete file upload</a></li>
        </ul>
      </div>
      <div id="description_upload_api">
        <h3 id="uploads-api">Uploader Service</h3>
        <h4 id="upload-status">Upload status</h4>
        <p>An upload status can be:</p>
        <ul>
        <li><code>PENDING</code> - waiting for it's parts to be uploaded</li>
        <li><code>COMPLETED</code> - all parts were uploaded and the file was assembled on the storage</li>
        <li><code>ABORTED</code> - canceled for some reason(user request, timeout, error)</li>
        </ul>
        <h4 id="endpoints">Endpoints</h4>
        <ul>
        <li><code>GET /upload/&lt;token&gt;</code> - get upload info</li>
        </ul>
        <p>Response:</p>
        <table class="docutils">
        <thead>
        <tr>
        <th>Status Code</th>
        <th>Explanation</th>
        <th>Body</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>200 OK</td>
        <td>all good</td>
        <td><em>explained below</em></td>
        </tr>
        <tr>
        <td>500 Internal Server Error</td>
        <td>internal error</td>
        <td><em>empty</em></td>
        </tr>
        <tr>
        <td>404 Not Found</td>
        <td>unknown upload token</td>
        <td><em>empty</em></td>
        </tr>
        </tbody>
        </table>
        <p><strong>200 OK</strong></p>
        <p>Body:
          <pre><code>js
          {
            token: "upload-token",
            name: "my-file.zip",
            size: 10249281,
            md5: "filemd5",  // as provided on upload creation
            status: "PENDING",
            parts: [
              {
              // upload parts -- see parts API for representation
              }
            ]
        }</code>
      </pre>
      </p>
      </div>
      <div id="description_upload_parts_api">
        <h3 id="parts-api">Parts API</h3>
        <h4 id="part-status">Part status</h4>
        <ul>
        <li><code>PENDING</code> -- part is ready to be uploaded</li>
        <li><code>COMPLETE</code> -- part data has been complete and saved to storage</li>
        </ul>
        <h4 id="part-locking">Part locking</h4>
        <p>When a part is being uploaded it is being locked, by setting the
        <code>locked</code> flag to true. No changes/uploads can happen on this part from
        other requests.</p>
        <h4 id="byte-ranges">Byte ranges</h4>
        <p>The part range is specified by <code>startOffset</code> and <code>endOffset</code>. They
        indexes zero-based and inclusive. Example:</p>
        <p>Given:</p>
        <ul>
        <li>the following file data: "abcdefghij"</li>
        <li><code>part1</code> with <code>startOffset=0</code> and <code>endOffset=3</code></li>
        <li><code>part2</code> with <code>startOffset=4</code> and <code>endOffset=7</code></li>
        </ul>
        <p>Then:</p>
        <ul>
        <li><code>part1</code> is <code>abcd</code></li>
        <li><code>part2</code> is <code>efgh</code></li>
        </ul>
        <h4 id="endpoints_1">Endpoints</h4>
        <ul>
        <li><code>GET /upload/&lt;token&gt;/&lt;part_no&gt;</code> - get part info</li>
        </ul>
        <p>Responses:</p>
        <table>
        <thead>
        <tr>
        <th>Status Code</th>
        <th>Explanation</th>
        <th>Body</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>200 OK</td>
        <td>all good</td>
        <td><em>explained below</em></td>
        </tr>
        <tr>
        <td>500 Internal Server Error</td>
        <td>internal error</td>
        <td><em>empty</em></td>
        </tr>
        <tr>
        <td>404 Not Found</td>
        <td>unknown upload token or part number</td>
        <td><em>empty</em></td>
        </tr>
        </tbody>
        </table>
        <p><strong>200 OK</strong></p>
        <p>Body:
<pre><code>js
  {
    partNo: 3,
    startOffset: 1024,
    endOffset: 2047,
    status: "PENDING",
    locked: false
  }</code>
        </pre>
        </p>
        <ul>
        <li><code>PUT /upload/&lt;token&gt;/&lt;part_no&gt;</code> - receives part data</li>
        </ul>
        <p>The entire body of the request is piped as-is to S3. It is assumed that the
          body is the correct piece of the file, from <code>startOffset</code> to <code>endOffset</code></p>
        <p>While this requests is being processed the part is going to be in a
          locked state. The request can end with a <code>409</code> status code if a
          lock for the part could not be obtained.</p>
        <p><strong>Warning</strong> if content length is less than part size the request will
          timeout</p>
        <p>Responses:</p>
        <table>
        <thead>
        <tr>
        <th>Status Code</th>
        <th>Explanation</th>
        <th>Body</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>200 OK</td>
        <td>all good</td>
        <td><em>explained below</em></td>
        </tr>
        <tr>
        <td>500 Internal Server Error</td>
        <td>internal error</td>
        <td><em>empty</em></td>
        </tr>
        <tr>
        <td>404 Not Found</td>
        <td>unknown upload token or part number</td>
        <td><em>empty</em></td>
        </tr>
        <tr>
        <td>409 Conflict</td>
        <td>part data cannot be uploaded</td>
        <td><em>empty</em></td>
        </tr>
        </tbody>
        </table>
        <p><strong>200 OK</strong></p>
        <ul>
        <li><code>DELETE /upload/&lt;token&gt;/&lt;part_no&gt;</code> - reset part data</li>
        </ul>
        <p>This will reset the part to it's <code>PENDING</code> state and remove any
          storage meta.</p>
        <p>Responses:</p>
        <table>
        <thead>
        <tr>
        <th>Status Code</th>
        <th>Explanation</th>
        <th>Body</th>
        </tr>
        </thead>
        <tbody>
        <tr>
        <td>200 Accepted</td>
        <td>all good</td>
        <td><em>empty</em></td>
        </tr>
        <tr>
        <td>500 Internal Server Error</td>
        <td>internal error</td>
        <td><em>empty</em></td>
        </tr>
        <tr>
        <td>404 Not Found</td>
        <td>unknown upload token or part number</td>
        <td><em>empty</em></td>
        </tr>
        <tr>
        <td>409 Conflict</td>
        <td>upload completed or part locked</td>
        <td><em>empty</em></td>
        </tr>
        </tbody>
        </table>
      </div>
      <div id="description_upload_example">
                <h1 id="example-upload-on-figshare">Example Upload on fig<strong>share</strong></h1>
                <p>To upload a file to the fig<strong>share</strong>, one needs to use the standard <em>fig<strong>share</strong> API</em>, coupled
                with the <em>fig<strong>share</strong> upload system API</em>.
                A full script that lists articles <em>before</em> and <em>after</em> the new <strong>article</strong> and <strong>file</strong> are created
                would look like this:</p>
<pre><code class="python hljs"><span class="hljs-comment">#!/usr/bin/env python</span>

<span class="hljs-keyword">import</span> hashlib
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> requests.exceptions <span class="hljs-keyword">import</span> HTTPError


BASE_URL = <span class="hljs-string">'https://api.figshare.com/v2/{endpoint}'</span>
TOKEN = <span class="hljs-string">'&lt;insert access token here&gt;'</span>
CHUNK_SIZE = <span class="hljs-number">1048576</span>

FILE_PATH = <span class="hljs-string">'/path/to/work/directory/cat.obj'</span>
TITLE = <span class="hljs-string">'A 3D cat object model'</span>


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">raw_issue_request</span><span class="hljs-params">(method, url, data=None, binary=False)</span>:</span>
    headers = {<span class="hljs-string">'Authorization'</span>: <span class="hljs-string">'token '</span> + TOKEN}
    <span class="hljs-keyword">if</span> data <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">None</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> binary:
        data = json.dumps(data)
    response = requests.request(method, url, headers=headers, data=data)
    <span class="hljs-keyword">try</span>:
        response.raise_for_status()
        <span class="hljs-keyword">try</span>:
            data = json.loads(response.content)
        <span class="hljs-keyword">except</span> ValueError:
            data = response.content
    <span class="hljs-keyword">except</span> HTTPError <span class="hljs-keyword">as</span> error:
        <span class="hljs-keyword">print</span> <span class="hljs-string">'Caught an HTTPError: {}'</span>.format(error.message)
        <span class="hljs-keyword">print</span> <span class="hljs-string">'Body:\n'</span>, response.content
        <span class="hljs-keyword">raise</span>

    <span class="hljs-keyword">return</span> data


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">issue_request</span><span class="hljs-params">(method, endpoint, *args, **kwargs)</span>:</span>
    <span class="hljs-keyword">return</span> raw_issue_request(method, BASE_URL.format(endpoint=endpoint), *args, **kwargs)


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">list_articles</span><span class="hljs-params">()</span>:</span>
    result = issue_request(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'account/articles'</span>)
    <span class="hljs-keyword">print</span> <span class="hljs-string">'Listing current articles:'</span>
    <span class="hljs-keyword">if</span> result:
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> result:
            <span class="hljs-keyword">print</span> <span class="hljs-string">u'  {url} - {title}'</span>.format(**item)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">'  No articles.'</span>
    <span class="hljs-keyword">print</span>


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_article</span><span class="hljs-params">(title)</span>:</span>
    data = {
        <span class="hljs-string">'title'</span>: title  <span class="hljs-comment"># You may add any other information about the article here as you wish.</span>
    }
    result = issue_request(<span class="hljs-string">'POST'</span>, <span class="hljs-string">'account/articles'</span>, data=data)
    <span class="hljs-keyword">print</span> <span class="hljs-string">'Created article:'</span>, result[<span class="hljs-string">'location'</span>], <span class="hljs-string">'\n'</span>

    result = raw_issue_request(<span class="hljs-string">'GET'</span>, result[<span class="hljs-string">'location'</span>])

    <span class="hljs-keyword">return</span> result[<span class="hljs-string">'id'</span>]


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">list_files_of_article</span><span class="hljs-params">(article_id)</span>:</span>
    result = issue_request(<span class="hljs-string">'GET'</span>, <span class="hljs-string">'account/articles/{}/files'</span>.format(article_id))
    <span class="hljs-keyword">print</span> <span class="hljs-string">'Listing files for article {}:'</span>.format(article_id)
    <span class="hljs-keyword">if</span> result:
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> result:
            <span class="hljs-keyword">print</span> <span class="hljs-string">'  {id} - {name}'</span>.format(**item)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">print</span> <span class="hljs-string">'  No files.'</span>

    <span class="hljs-keyword">print</span>


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_file_check_data</span><span class="hljs-params">(file_name)</span>:</span>
    <span class="hljs-keyword">with</span> open(file_name, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> fin:
        md5 = hashlib.md5()
        size = <span class="hljs-number">0</span>
        data = fin.read(CHUNK_SIZE)
        <span class="hljs-keyword">while</span> data:
            size += len(data)
            md5.update(data)
            data = fin.read(CHUNK_SIZE)
        <span class="hljs-keyword">return</span> md5.hexdigest(), size


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initiate_new_upload</span><span class="hljs-params">(article_id, file_name)</span>:</span>
    endpoint = <span class="hljs-string">'account/articles/{}/files'</span>
    endpoint = endpoint.format(article_id)

    md5, size = get_file_check_data(file_name)
    data = {<span class="hljs-string">'name'</span>: os.path.basename(file_name),
            <span class="hljs-string">'md5'</span>: md5,
            <span class="hljs-string">'size'</span>: size}

    result = issue_request(<span class="hljs-string">'POST'</span>, endpoint, data=data)
    <span class="hljs-keyword">print</span> <span class="hljs-string">'Initiated file upload:'</span>, result[<span class="hljs-string">'location'</span>], <span class="hljs-string">'\n'</span>

    result = raw_issue_request(<span class="hljs-string">'GET'</span>, result[<span class="hljs-string">'location'</span>])

    <span class="hljs-keyword">return</span> result


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">complete_upload</span><span class="hljs-params">(article_id, file_id)</span>:</span>
    issue_request(<span class="hljs-string">'POST'</span>, <span class="hljs-string">'account/articles/{}/files/{}'</span>.format(article_id, file_id))


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">upload_parts</span><span class="hljs-params">(file_info)</span>:</span>
    url = <span class="hljs-string">'{upload_url}'</span>.format(**file_info)
    result = raw_issue_request(<span class="hljs-string">'GET'</span>, url)

    <span class="hljs-keyword">print</span> <span class="hljs-string">'Uploading parts:'</span>
    <span class="hljs-keyword">with</span> open(FILE_PATH, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> fin:
        <span class="hljs-keyword">for</span> part <span class="hljs-keyword">in</span> result[<span class="hljs-string">'parts'</span>]:
            upload_part(file_info, fin, part)
    <span class="hljs-keyword">print</span>


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">upload_part</span><span class="hljs-params">(file_info, stream, part)</span>:</span>
    udata = file_info.copy()
    udata.update(part)
    url = <span class="hljs-string">'{upload_url}/{partNo}'</span>.format(**udata)

    stream.seek(part[<span class="hljs-string">'startOffset'</span>])
    data = stream.read(part[<span class="hljs-string">'endOffset'</span>] - part[<span class="hljs-string">'startOffset'</span>] + <span class="hljs-number">1</span>)

    raw_issue_request(<span class="hljs-string">'PUT'</span>, url, data=data, binary=<span class="hljs-keyword">True</span>)
    <span class="hljs-keyword">print</span> <span class="hljs-string">'  Uploaded part {partNo} from {startOffset} to {endOffset}'</span>.format(**part)


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>
    <span class="hljs-comment"># We first create the article</span>
    list_articles()
    article_id = create_article(TITLE)
    list_articles()
    list_files_of_article(article_id)

    <span class="hljs-comment"># Then we upload the file.</span>
    file_info = initiate_new_upload(article_id, FILE_PATH)
    <span class="hljs-comment"># Until here we used the figshare API; following lines use the figshare upload service API.</span>
    upload_parts(file_info)
    <span class="hljs-comment"># We return to the figshare API to complete the file upload process.</span>
    complete_upload(article_id, file_info[<span class="hljs-string">'id'</span>])
    list_files_of_article(article_id)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
    main()
</code></pre>
                    </div>
                    <div id="description_upload_output">
                <h2 id="output-of-script">Output of Script</h2>
                <p>This is an example of how the script would output on an account with no added articles or files yet.</p>
<pre><code class="hljs stylus">Listing current articles:
No articles.

Created <span class="hljs-tag">article</span>: https:<span class="hljs-comment">//api.figshare.com/v2/account/articles/2012182</span>

Listing current articles:
https:<span class="hljs-comment">//api.figshare.com/v2/articles/2012182 - A 3D cat object model</span>

Listing files <span class="hljs-keyword">for</span> <span class="hljs-tag">article</span> <span class="hljs-number">2012182</span>:
No files.

Initiated file upload: https:<span class="hljs-comment">//api.figshare.com/v2/account/articles/2012182/files/3008150</span>

Uploading parts:
Uploaded part <span class="hljs-number">1</span> from <span class="hljs-number">0</span> to <span class="hljs-number">213325</span>

Listing files <span class="hljs-keyword">for</span> <span class="hljs-tag">article</span> <span class="hljs-number">2012182</span>:
<span class="hljs-number">3008150</span> - cat<span class="hljs-class">.obj</span>

</code></pre>

      </div>
        <div id="description_upload_bash">
                <h2 id="upload-bash-of-script">Upload Bash Script</h2>
                <p>This is a bash script for uploading files. You'll have to replace certain strings inside it with your keys.</p>
<pre><code class="nohighlight">
#!/bin/bash
# exit script if any command fails
set -e

#modify BASE_URL, ACCESS_TOKEN, FILE_NAME and FILE_PATH according to your needs
BASE_URL='https://api.figshare.com/v2/account/articles'
ACCESS_TOKEN='insert access token here'
FILE_NAME='test.txt'
FILE_PATH='/path/to/your/file/'$FILE_NAME

# ####################################################################################

#Retrieve the file size and MD5 values for the item which needs to be uploaded
FILE_SIZE=$(stat -c%s $FILE_PATH)
MD5=($(md5sum $FILE_PATH))


# List all of the existing items
echo 'List all of the existing items...'
RESPONSE=$(curl -s -f -H 'Authorization: token '$ACCESS_TOKEN -X GET "$BASE_URL")
echo "The item list dict contains: "$RESPONSE
echo ''

# Create a new item
echo 'Creating a new item...'
RESPONSE=$(curl -s -f -d '{"title": "Sample upload item"}' -H 'Authorization: token '$ACCESS_TOKEN -H 'Content-Type: application/json' -X POST "$BASE_URL")
echo "The location of the created item is "$RESPONSE
echo ''

# Retrieve item id
echo 'Retrieving the item id...'
ITEM_ID=$(echo "$RESPONSE" | sed -r "s/.*\/([0-9]+).*/\1/")
echo "The item id is "$ITEM_ID
echo ''

# List item files
echo 'Retrieving the item files...'
FILES_LIST=$(curl -s -f -H 'Authorization: token '$ACCESS_TOKEN -X GET "$BASE_URL/$ITEM_ID/files")
echo 'The files list of the newly-create item should be an empty one. Returned results: '$FILES_LIST
echo ''

# Initiate new upload:
echo 'A new upload had been initiated...'
RESPONSE=$(curl -s -f -d '{"md5": "'${MD5}'", "name": "'${FILE_NAME}'", "size": '${FILE_SIZE}'}' -H 'Content-Type: application/json' -H 'Authorization: token '$ACCESS_TOKEN -X POST "$BASE_URL/$ITEM_ID/files")
echo $RESPONSE
echo ''

# Retrieve file id
echo 'The file id is retrieved...'
FILE_ID=$(echo "$RESPONSE" | sed -r "s/.*\/([0-9]+).*/\1/")
echo 'The file id is: '$FILE_ID
echo ''

# Retrieve the upload url
echo 'Retrieving the upload URL...'
RESPONSE=$(curl -s -f -H 'Authorization: token '$ACCESS_TOKEN -X GET "$BASE_URL/$ITEM_ID/files/$FILE_ID")
UPLOAD_URL=$(echo "$RESPONSE" | sed -r 's/.*"upload_url":\s"([^"]+)".*/\1/')
echo 'The upload URL is: '$UPLOAD_URL
echo ''

# Retrieve the upload parts
echo 'Retrieving the part value...'
RESPONSE=$(curl -s -f -H 'Authorization: token '$ACCESS_TOKEN -X GET "$UPLOAD_URL")
PARTS_SIZE=$(echo "$RESPONSE" | sed -r 's/"endOffset":([0-9]+).*/\1/' | sed -r 's/.*,([0-9]+)/\1/')
PARTS_SIZE=$(($PARTS_SIZE+1))
echo 'The part value is: '$PARTS_SIZE
echo ''


# Split item into needed parts
echo 'Spliting the provided item into parts process had begun...'
split -b$PARTS_SIZE $FILE_PATH part_ --numeric=1

echo 'Process completed!'

# Retrive the number of parts
MAX_PART=$((($FILE_SIZE+$PARTS_SIZE-1)/$PARTS_SIZE))
echo 'The number of parts is: '$MAX_PART
echo ''

# Perform the PUT operation of parts
echo 'Perform the PUT operation of parts...'
for ((i=1; i<=$MAX_PART; i++))
do
    PART_VALUE='part_'$i
    if [ "$i" -le 9 ]
    then
        PART_VALUE='part_0'$i
    fi
    RESPONSE=$(curl -s -f -H 'Authorization: token '$ACCESS_TOKEN -X PUT "$UPLOAD_URL/$i" --data-binary @$PART_VALUE)
    echo "Done uploading part nr: $i/"$MAX_PART
done

echo 'Process was finished!'
echo ''

# Complete upload
echo 'Completing the file upload...'
RESPONSE=$(curl -s -f -H 'Authorization: token '$ACCESS_TOKEN -X POST "$BASE_URL/$ITEM_ID/files/$FILE_ID")
echo 'Done!'
echo ''

#remove the part files
rm part_*

# List all of the existing items
RESPONSE=$(curl -s -f -H 'Authorization: token '$ACCESS_TOKEN -X GET "$BASE_URL")
echo 'New list of items: '$RESPONSE
echo ''
</code></pre>

      </div>
      <div id="description_upload_from_s3">
        <h2 id="upload-from-s3-script">Upload S3 File to fig<b>share</b></h2>
        <p>This is a python script for uploading files. You'll have to replace certain strings inside it with your keys.</p>
        <pre><code class="nohighlight">
import hashlib
import json
import requests

from requests.exceptions import HTTPError
from boto.s3.connection import S3Connection

BASE_URL = "https://api.figshare.com/v2/{endpoint}"
CHUNK_SIZE = 1048576  # bytes
TOKEN = "&lt;insert access token here&gt;"
BUCKET_NAME = "&lt;insert bucket name here&gt;"
FILE_KEY = "&lt;insert file key here&gt;"
AWS_KEY = "&lt;insert AWS key here&gt;"
AWS_SECRET = "&lt;insert AWS secret here&gt;"

RECORD_TITLE = "&lt;insert Figshare record title here&gt;"


def retrieve_key():
    conn = S3Connection(AWS_KEY, AWS_SECRET, is_secure=False)
    bucket = conn.get_bucket(BUCKET_NAME)
    key = bucket.lookup(FILE_KEY)

    return key


def raw_issue_request(method, url, data=None, binary=False):
    headers = {"Authorization": "token " + TOKEN}
    if data is not None and not binary:
        data = json.dumps(data)
    response = requests.request(method, url, headers=headers, data=data)
    try:
        response.raise_for_status()
        try:
            data = json.loads(response.content)
        except ValueError:
            data = response.content
    except HTTPError as error:
        print "Caught an HTTPError: {}".format(error.message)
        print "Body:\n", response.content
        raise

    return data


def issue_request(method, endpoint, *args, **kwargs):
    return raw_issue_request(method, BASE_URL.format(endpoint=endpoint), *args, **kwargs)


def list_articles():
    result = issue_request("GET", "account/articles")
    print "Listing current articles:"
    if result:
        for item in result:
            print u"  {url} - {title}".format(**item)
    else:
        print "  No articles."


def create_article(title):
    data = {"title": title}  # You may add any other information about the article here as you wish.
    result = issue_request("POST", "account/articles", data=data)
    print "Created article:", result["location"], "\n"

    result = raw_issue_request("GET", result["location"])

    return result["id"]


def list_files_of_article(article_id):
    result = issue_request("GET", "account/articles/{}/files".format(article_id))
    print "Listing files for article {}:".format(article_id)
    if result:
        for item in result:
            print "  {id} - {name}".format(**item)
    else:
        print "  No files."


def get_file_check_data(key):
    md5 = hashlib.md5()
    start_byte = 0
    stop_byte = min(CHUNK_SIZE, key.size) - 1
    headers = {"Range": "bytes={}-{}".format(start_byte, stop_byte)}
    data = key.get_contents_as_string(headers=headers)
    size = len(data)
    while size &lt; key.size:
        md5.update(data)
        start_byte = size
        stop_byte = min(size + CHUNK_SIZE, key.size) - 1
        headers = {"Range": "bytes={}-{}".format(start_byte, stop_byte)}
        data = key.get_contents_as_string(headers=headers)
        size += len(data)
    md5.update(data)

    file_name = key.name.rsplit("/", 1)[1] if "/" in key.name else key.name

    return md5.hexdigest(), key.size, file_name


def initiate_new_upload(article_id, key):
    endpoint = "account/articles/{}/files"
    endpoint = endpoint.format(article_id)

    md5, size, name = get_file_check_data(key)

    data = {"md5": md5, "size": size, "name": name}

    print data

    result = issue_request("POST", endpoint, data=data)
    print "Initiated file upload:", result["location"], "\n"

    result = raw_issue_request("GET", result["location"])

    return result


def complete_upload(article_id, file_id):
    issue_request("POST", "account/articles/{}/files/{}".format(article_id, file_id))


def upload_parts(file_info, key):
    url = "{upload_url}".format(**file_info)
    result = raw_issue_request("GET", url)

    print result

    print "Uploading parts:"

    for part in result["parts"]:
        upload_part(file_info, part, key)

    print


def upload_part(file_info, part, key):
    udata = file_info.copy()
    udata.update(part)
    url = "{upload_url}/{partNo}".format(**udata)

    your_bytes = key.get_contents_as_string(
        headers={"Range": "bytes=" + str(part["startOffset"]) + "-" + str(part["endOffset"])}
    )

    raw_issue_request("PUT", url, data=your_bytes, binary=True)
    print "  Uploaded part {partNo} from {startOffset} to {endOffset}".format(**part)


def main():
    # We first create the article
    list_articles()
    article_id = create_article(RECORD_TITLE)
    list_files_of_article(article_id)

    # Then we retrieve the file
    file_key = retrieve_key()

    # Then we upload the file.
    file_info = initiate_new_upload(article_id, file_key)
    # Until here we used the figshare API; following lines use the figshare upload service API.
    upload_parts(file_info, file_key)
    # We return to the figshare API to complete the file upload process.
    complete_upload(article_id, file_info["id"])
    list_files_of_article(article_id)


if __name__ == "__main__":
    main()
        </code></pre>
      </div>
      <div id="description_oai_pmh">
        <h1 id="oai-pmh">OAI-PMH</h1>
        <p>fig<strong>share</strong> supports the Open Archives Initiative (OAI) and implements the
        <strong>OAI-PMH</strong> service to provide access to public articles metadata.
        For more detailed information, please refer to the
        <a href="https://www.openarchives.org/OAI/openarchivesprotocol.html">protocol specification</a>.</p>
      </div>
      <div id="description_oai_baseurl">
        <h2 id="base-url">Base URL</h2>
        <p>fig<strong>share</strong> OAI-PMH v2.0 implementation has at the following <strong>baseURL</strong>:
        <a href="https://api.figshare.com/v2/oai">https://api.figshare.com/v2/oai</a></p>
      </div>
      <div id="description_oai_itemarticle">
        <h2 id="item-article">Item == Article</h2>
        <p>An Item in the OAI-PMH interface is the most recent version of an article.</p>
      </div>
      <div id="description_oai_metadata">
        <h2 id="metadata-formats">Metadata formats</h2>
        <p>Currently, the supported formats are: <strong>Dublin Core</strong> (<em>oai_dc</em>), <strong>Datacite</strong> (<em>oai_datacite</em>), <strong>RDF</strong> (<em>rdf</em>), <strong>CERIF XML</strong> (<em>cerif</em>), <strong>Qualified Dublin Core</strong> (<em>qdc</em>) (hasPart support), <strong>Metadata Encoding and Transmission Standard</strong> (<em>mets</em>) and <strong>UKETD_DC</strong> (<em>uketd_dc</em>).</p>
      </div>
      <div id="description_oai_datestamp">
        <h2 id="datestamps">Datestamps</h2>
        <p>Every record has a datestamp which is the published datetime of that article.
        The earliest datestamp is given in the <code>&lt;earliestDatestamp&gt;</code> element of the
        <a href="https://api.figshare.com/v2/oai?verb=Identify">Identify</a> response.</p>
      </div>
      <div id="description_oai_sets">
        <h2 id="sets">Sets</h2>
        <p>You can get a list of all the sets supported with the
        <a href="https://api.figshare.com/v2/oai?verb=ListSets">ListSets</a> verb.</p>
        <p>At this moment selectieve harvesting can be performed using sets representing:</p>
        <ul>
        <li>an <a href="https://api.figshare.com/v2/oai?verb=ListIdentifiers&amp;metadataPrefix=oai_dc&amp;set=item_type_7">item type</a></li>
        </ul>
<pre><code>    ...
    &lt;header&gt;
      &lt;identifier&gt;oai:figshare.com:article/2001969&lt;/identifier&gt;
      &lt;datestamp&gt;2015-08-17T14:09:33Z&lt;/datestamp&gt;
      &lt;setSpec&gt;category_184&lt;/setSpec&gt;
      &lt;setSpec&gt;category_185&lt;/setSpec&gt;
      &lt;setSpec&gt;portal_15&lt;/setSpec&gt;
      &lt;setSpec&gt;item_type_7&lt;/setSpec&gt;
    &lt;/header&gt;
    ...
</code></pre>

        <ul>
        <li>a <a href="https://api.figshare.com/v2/oai?verb=ListIdentifiers&amp;metadataPrefix=oai_dc&amp;set=portal_63">portal/institution</a></li>
        </ul>
<pre><code>    ...
    &lt;header&gt;
      &lt;identifier&gt;oai:figshare.com:article/2009490&lt;/identifier&gt;
      &lt;datestamp&gt;2015-12-16T14:30:27Z&lt;/datestamp&gt;
      &lt;setSpec&gt;category_1&lt;/setSpec&gt;
      &lt;setSpec&gt;category_4&lt;/setSpec&gt;
      &lt;setSpec&gt;category_12&lt;/setSpec&gt;
      &lt;setSpec&gt;category_14&lt;/setSpec&gt;
      &lt;setSpec&gt;category_19&lt;/setSpec&gt;
      &lt;setSpec&gt;category_21&lt;/setSpec&gt;
      &lt;setSpec&gt;category_128&lt;/setSpec&gt;
      &lt;setSpec&gt;category_133&lt;/setSpec&gt;
      &lt;setSpec&gt;category_272&lt;/setSpec&gt;
      &lt;setSpec&gt;category_873&lt;/setSpec&gt;
      &lt;setSpec&gt;category_931&lt;/setSpec&gt;
      &lt;setSpec&gt;portal_63&lt;/setSpec&gt;
      &lt;setSpec&gt;item_type_6&lt;/setSpec&gt;
    &lt;/header&gt;
    ...
</code></pre>

        <ul>
        <li>a <a href="https://api.figshare.com/v2/oai?verb=ListIdentifiers&amp;metadataPrefix=oai_dc&amp;set=category_150">category</a>:</li>
        </ul>
<pre><code>    ...
    &lt;header&gt;
      &lt;identifier&gt;oai:figshare.com:article/2058654&lt;/identifier&gt;
      &lt;datestamp&gt;2015-12-27T23:40:01Z&lt;/datestamp&gt;
      &lt;setSpec&gt;category_54&lt;/setSpec&gt;
      &lt;setSpec&gt;category_55&lt;/setSpec&gt;
      &lt;setSpec&gt;category_56&lt;/setSpec&gt;
      &lt;setSpec&gt;category_57&lt;/setSpec&gt;
      &lt;setSpec&gt;category_58&lt;/setSpec&gt;
      &lt;setSpec&gt;category_59&lt;/setSpec&gt;
      &lt;setSpec&gt;category_145&lt;/setSpec&gt;
      &lt;setSpec&gt;category_146&lt;/setSpec&gt;
      &lt;setSpec&gt;category_147&lt;/setSpec&gt;
      &lt;setSpec&gt;category_148&lt;/setSpec&gt;
      &lt;setSpec&gt;category_149&lt;/setSpec&gt;
      &lt;setSpec&gt;category_150&lt;/setSpec&gt;
      &lt;setSpec&gt;category_492&lt;/setSpec&gt;
      &lt;setSpec&gt;category_493&lt;/setSpec&gt;
      &lt;setSpec&gt;category_494&lt;/setSpec&gt;
      &lt;setSpec&gt;category_496&lt;/setSpec&gt;
      &lt;setSpec&gt;category_497&lt;/setSpec&gt;
      &lt;setSpec&gt;category_498&lt;/setSpec&gt;
      &lt;setSpec&gt;category_499&lt;/setSpec&gt;
      &lt;setSpec&gt;category_500&lt;/setSpec&gt;
      &lt;setSpec&gt;category_501&lt;/setSpec&gt;
      &lt;setSpec&gt;category_502&lt;/setSpec&gt;
      &lt;setSpec&gt;item_type_6&lt;/setSpec&gt;
    &lt;/header&gt;
    ...
</code></pre>

        <ul>
        <li>or a <a href="https://api.figshare.com/v2/oai?verb=ListIdentifiers&amp;metadataPrefix=oai_dc&amp;set=month_year_10_2016">month_year</a>:</li>
        </ul>
<pre><code>    ...
    &lt;header&gt;
      &lt;identifier&gt;oai:figshare.com:article/2004335&lt;/identifier&gt;
      &lt;datestamp&gt;2016-10-31T11:14:47Z&lt;/datestamp&gt;
      &lt;setSpec&gt;category_215&lt;/setSpec&gt;
      &lt;setSpec&gt;category_239&lt;/setSpec&gt;
      &lt;setSpec&gt;portal_15&lt;/setSpec&gt;
      &lt;setSpec&gt;item_type_11&lt;/setSpec&gt;
    &lt;/header&gt;
    ...
</code></pre>

      </div>
      <div id="description_oai_update_schedule">
          <h2 id="update-schedule">Update schedule</h2>
          <p>Usually, metadata for a published article becomes available in a few moments
          after its publication on fig<strong>share</strong>.</p>
      </div>
      <div id="description_oai_pagination">
        <h2 id="pagination-resumption-token-expiration">Pagination &amp; Resumption Token Expiration</h2>
        <p>Results for <strong>ListSets</strong>, <strong>ListIdentifiers</strong>, <strong>ListRecords</strong> are paginated.
        To request the next page, use the resumptionToken value provided for the
        current page. You can read more
        <a href="https://www.openarchives.org/OAI/openarchivesprotocol.html#FlowControl">here</a>,
        but your harvesting software system should be able to use resumption tokens with
        no problem.</p>
        <p>One particularity on fig<strong>share</strong> OAI-PMH is the expiration datetime (UTC) for
        resumption tokens. Thus, a token expires after 5 minutes.</p>
    </div>
    <div id="description_oai_ratelimit">
        <h2 id="rate-limit">Rate limit</h2>
        <p>Currently no rate limiting is implemented.
        We recommend you to make no more than one request per second.</p>
    </div>
    <div id="description_oai_futuredev">
        <h2 id="future-development">Future development</h2>
        <p>Please <a href="https://figshare.com/contact">let us know</a> that you are harvesting us.
        Your input will drive the future development of the OAI-PMH protocol at figshare.</p>
    </div>
    <div id="description_oai_someexamples">
        <h2 id="some-examples">Some examples</h2>
        <p><strong>Identify</strong></p>
<pre><code>curl https://api.figshare.com/v2/oai?verb=Identify

&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;?xml-stylesheet type="text/xsl" href="/v2/static/oai2.xsl"?&gt;
&lt;OAI-PMH xmlns="http://www.openarchives.org/OAI/2.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"&gt;
    &lt;responseDate&gt;2016-04-29T11:58:28Z&lt;/responseDate&gt;
    &lt;request verb="Identify"&gt;https://api.figshare.com/v2/oai&lt;/request&gt;
    &lt;Identify&gt;
        &lt;repositoryName&gt;figshare&lt;/repositoryName&gt;
        &lt;baseURL&gt;https://api.figshare.com/v2/oai&lt;/baseURL&gt;
        &lt;protocolVersion&gt;2.0&lt;/protocolVersion&gt;
        &lt;adminEmail&gt;info@figshare.com&lt;/adminEmail&gt;
        &lt;earliestDatestamp&gt;2010-01-08T01:24:54Z&lt;/earliestDatestamp&gt;
        &lt;deletedRecord&gt;transient&lt;/deletedRecord&gt;
        &lt;granularity&gt;YYYY-MM-DDThh:mm:ssZ&lt;/granularity&gt;
    &lt;/Identify&gt;
&lt;/OAI-PMH&gt;
</code></pre>
        <hr />
        <p><strong>ListSets</strong></p>
<pre><code>curl https://api.figshare.com/v2/oai?verb=ListSets

&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;?xml-stylesheet type="text/xsl" href="/v2/static/oai2.xsl"?&gt;
&lt;OAI-PMH xmlns="http://www.openarchives.org/OAI/2.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"&gt;
     &lt;responseDate&gt;2016-04-29T12:00:46Z&lt;/responseDate&gt;
     &lt;request verb="ListSets"&gt;https://api.figshare.com/v2/oai&lt;/request&gt;
     &lt;ListSets&gt;
         &lt;set&gt;
             &lt;setSpec&gt;portal_147&lt;/setSpec&gt;
             &lt;setName&gt;Karger Publishers&lt;/setName&gt;
         &lt;/set&gt;
         &lt;set&gt;
             &lt;setSpec&gt;portal_144&lt;/setSpec&gt;
             &lt;setName&gt;Digital Science&lt;/setName&gt;
         &lt;/set&gt;
         &lt;!-- ... --&gt;
         &lt;set&gt;
             &lt;setSpec&gt;portal_102&lt;/setSpec&gt;
             &lt;setName&gt;Wiley&lt;/setName&gt;
         &lt;/set&gt;
         &lt;resumptionToken expirationDate="2016-04-29T13:00:46Z"&gt;dmVyYj1MaXN0U2V0cyZwYWdlPTI=&lt;/resumptionToken&gt;
    &lt;/ListSets&gt;
&lt;/OAI-PMH&gt;
</code></pre>
        <hr />
        <p><strong>ListIdentifiers</strong></p>
        <p>Selective harvesting: using set <code>category_539</code> (Chemical Engineering Design).</p>
<pre><code>curl "https://api.figshare.com/v2/oai?verb=ListIdentifiers&amp;metadataPrefix=oai_dc&amp;set=category_539"

&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;?xml-stylesheet type="text/xsl" href="/v2/static/oai2.xsl"?&gt;
&lt;OAI-PMH xmlns="http://www.openarchives.org/OAI/2.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"&gt;
&lt;responseDate&gt;2016-04-29T12:11:18Z&lt;/responseDate&gt;
&lt;request metadataPrefix="oai_dc" set="category_539" verb="ListIdentifiers"&gt;https://api.figshare.com/v2/oai&lt;/request&gt;
    &lt;ListIdentifiers&gt;
        &lt;header&gt;
            &lt;identifier&gt;oai:figshare.com:article/2060079&lt;/identifier&gt;
            &lt;datestamp&gt;2016-01-04T08:32:32Z&lt;/datestamp&gt;
            &lt;setSpec&gt;category_539&lt;/setSpec&gt;
            &lt;setSpec&gt;category_614&lt;/setSpec&gt;
            &lt;setSpec&gt;category_1094&lt;/setSpec&gt;
            &lt;setSpec&gt;category_1100&lt;/setSpec&gt;
            &lt;setSpec&gt;item_type_6&lt;/setSpec&gt;
        &lt;/header&gt;
    &lt;/ListIdentifiers&gt;
&lt;/OAI-PMH&gt;
</code></pre>
        <hr />
        <p><strong>ListRecords</strong></p>
        <p>Selective harvesting: only articles published <code>until</code> 2010-08-18T08:33:01Z.</p>
<pre><code>curl "https://api.figshare.com/v2/oai?verb=ListRecords&amp;metadataPrefix=oai_dc&amp;until=2010-08-18T08:33:01Z"

&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;?xml-stylesheet type="text/xsl" href="/v2/static/oai2.xsl"?&gt;
&lt;OAI-PMH xmlns="http://www.openarchives.org/OAI/2.0/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/ http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd"&gt;
  &lt;responseDate&gt;2016-09-29T08:03:12Z&lt;/responseDate&gt;
  &lt;request metadataPrefix="oai_dc" until="2010-08-18T08:33:01Z" verb="ListRecords"&gt;https://api.figshare.com/v2/oai&lt;/request&gt;
  &lt;ListRecords&gt;
    &lt;record&gt;
      &lt;header&gt;
        &lt;identifier&gt;oai:figshare.com:article/145088&lt;/identifier&gt;
        &lt;datestamp&gt;2010-01-08T01:24:54Z&lt;/datestamp&gt;
        &lt;setSpec&gt;category_4&lt;/setSpec&gt;
        &lt;setSpec&gt;category_12&lt;/setSpec&gt;
        &lt;setSpec&gt;portal_5&lt;/setSpec&gt;
        &lt;setSpec&gt;item_type_3&lt;/setSpec&gt;
      &lt;/header&gt;
      &lt;metadata&gt;
        &lt;oai_dc:dc xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:dc="http://purl.org/dc/terms/" xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/ http://www.openarchives.org/OAI/2.0/oai_dc.xsd"&gt;
            &lt;dc:title&gt;A Modular BAM Complex in the Outer Membrane of the α-Proteobacterium &amp;lt;em&amp;gt;Caulobacter crescentus&amp;lt;/em&amp;gt;&lt;/dc:title&gt;
            &lt;dc:creator&gt;Anthony W. Purcell (105036)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Trevor Lithgow (105055)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Kipros Gabriel (189246)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Nicholas Noinaj (216256)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Sebastian Poggio (251019)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Khatira Anwari (254980)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Andrew Perry (254989)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Xenia Gatsos (254994)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Sri Harsha Ramarathinam (255001)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Nicholas A. Williamson (255006)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Susan Buchanan (255012)&lt;/dc:creator&gt;
            &lt;dc:creator&gt;Christine Jacobs-Wagner (255016)&lt;/dc:creator&gt;
            &lt;dc:subject&gt;Biochemistry&lt;/dc:subject&gt;
            &lt;dc:subject&gt;Cell Biology&lt;/dc:subject&gt;
            &lt;dc:subject&gt;modular&lt;/dc:subject&gt;
            &lt;dc:subject&gt;bam&lt;/dc:subject&gt;
            &lt;dc:subject&gt;membrane&lt;/dc:subject&gt;
            &lt;dc:description&gt;&amp;lt;div&amp;gt;&amp;lt;p&amp;gt;Mitochondria are organelles derived from an intracellular α-proteobacterium. The biogenesis of mitochondria relies on the assembly of β-barrel proteins into the mitochondrial outer membrane, a process inherited from the bacterial ancestor. &amp;lt;em&amp;gt;Caulobacter crescentus&amp;lt;/em&amp;gt; is an α-proteobacterium, and the BAM (β-barrel assembly machinery) complex was purified and characterized from this model organism. Like the mitochondrial sorting and assembly machinery complex, we find the BAM complex to be modular in nature. A ∼150 kDa core BAM complex containing BamA, BamB, BamD, and BamE associates with additional modules in the outer membrane. One of these modules, Pal, is a lipoprotein that provides a means for anchorage to the peptidoglycan layer of the cell wall. We suggest the modular design of the BAM complex facilitates access to substrates from the protein translocase in the inner membrane.&amp;lt;/p&amp;gt;&amp;lt;/div&amp;gt;&lt;/dc:description&gt;
            &lt;dc:date&gt;2010-01-08T01:24:48Z&lt;/dc:date&gt;
            &lt;dc:type&gt;Dataset&lt;/dc:type&gt;
            &lt;dc:identifier&gt;10.1371/journal.pone.0008619&lt;/dc:identifier&gt;
            &lt;dc:relation&gt;https://figshare.com/articles/A_Modular_BAM_Complex_in_the_Outer_Membrane_of_the_Proteobacterium_em_Caulobacter_crescentus_em_/145088&lt;/dc:relation&gt;
            &lt;dc:rights&gt;CC BY&lt;/dc:rights&gt;
       &lt;/oai_dc:dc&gt;
      &lt;/metadata&gt;
     &lt;/record&gt;
  &lt;/ListRecords&gt;
&lt;/OAI-PMH&gt;
</code></pre>
    </div>
    <div id="description_stats_home_service">
      <h1 id="figshare-statistics-service">fig<strong>share</strong> statistics service</h1>
      <p>The fig<strong>share</strong> statistics service is available at https://stats.figshare.com and
      it supports retrieving information about the number of <em>views</em>, <em>downloads</em> and <em>shares</em>
      related to items available of fig<strong>share</strong>. From here on, an event is one of <em>view</em>,
      <em>download</em> or <em>share</em>.</p>
      <p>All communication with the service is done through <em>https</em> and all data is encoded as <em>json</em>.
Optional authorization for specific endpoints is done through basic access authentication.</p>
      <ul>
        <li><a href="#stats_stats_service_authentication">Authentication</a></li>
        <li><a href="#stats_stats_service_errors">Errors</a></li>
        <li><a href="#stats_stats_service_endpoints">Endpoints</a></li>
      </ul>
    </div>
    <div id="description_stats_home_authentication">
      <h2 id="authentication">Authentication</h2>
      <p>For some specialized endpoints, access to institution specific statistics requires
      sending a <code>base64</code>-encoded pair of <code>username:password</code> in the basic authorization header:</p>
      <pre><code class="http">GET https://stats.figshare.com/lboro/top/views/article
Authorization: Basic dGhpcyBpcyBub3QgdGhlIHJlYWwgcGFzc3dvcmQsIGZvb2wh
      </code></pre>

      <p>Please note that the analogous endpoint for retrieving statistics for items outside
      the institutional scope, requires no authentication:</p>
      <pre><code class="http">GET https://stats.figshare.com/top/views/article
      </code></pre>

    </div>
    <div id="description_hrfeed_endpoint">
        <h2 id="hr-feed-endpoints">HR Feed Endpoint</h2>

        <h3 id="upload-hrfeed-file">Upload HRFeed File</h3>
        <h4 id="request">Request</h4>
        <pre><code class="http">POST /v2/institution/hrfeed/upload
        </code></pre>

        <p>The request needs to be of type <code>multipart/form-data</code> and have its <strong>Content-Type</strong> header set to the same value; the body of the file is sent as the form data.
        A typical request looks like this:</p>
<pre><code class="http">POST /v2/institution/hrfeed/upload HTTP/1.1
Host: api.figshare.com
Content-Length: 975
Accept-Encoding: gzip, deflate
Accept: */*
User-Agent: python-requests/2.5.3 CPython/2.7.10 Linux/4.1.4-1-ARCH
Connection: keep-alive
Content-Type: multipart/form-data; boundary=529448d158064de596afd8f892c84e15
Authorization: token 86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df

--529448d158064de596afd8f892c84e15
Content-Disposition: form-data; name=&quot;hrfeed&quot;; filename=&quot;feed.xml&quot;

&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;HRFeed&gt;
    &lt;Record&gt;
        &lt;UniqueID&gt;1234567&lt;/UniqueID&gt;
        &lt;Orcid&gt;1122-1299-6202-273X&lt;/Orcid&gt;
        &lt;FirstName&gt;Jane&lt;/FirstName&gt;
        &lt;LastName&gt;Doe&lt;/LastName&gt;
        &lt;Title&gt;Mrs&lt;/Title&gt;
        &lt;Initials&gt;JD&lt;/Initials&gt;
        &lt;Suffix&gt;&lt;/Suffix&gt;
        &lt;Email&gt;j.doe@sillymail.io&lt;/Email&gt;
        &lt;IsActive&gt;Y&lt;/IsActive&gt;
        &lt;UserQuota&gt;1048576000&lt;/UserQuota&gt;
        &lt;UserAssociationCriteria&gt;IT&lt;/UserAssociationCriteria&gt;
    &lt;/Record&gt;
    &lt;Record&gt;
        &lt;UniqueID&gt;1234568&lt;/UniqueID&gt;
        &lt;Orcid&gt;0000-0002-3109-4308&lt;/Orcid&gt;
        &lt;FirstName&gt;John&lt;/FirstName&gt;
        &lt;LastName&gt;Smith&lt;/LastName&gt;
        &lt;Title&gt;Mr&lt;/Title&gt;
        &lt;Initials&gt;&lt;/Initials&gt;
        &lt;Suffix&gt;&lt;/Suffix&gt;
        &lt;Email&gt;js@seriousness.com&lt;/Email&gt;
        &lt;IsActive&gt;Y&lt;/IsActive&gt;
        &lt;UserQuota&gt;10485760000&lt;/UserQuota&gt;
        &lt;UserAssociationCriteria&gt;&lt;/UserAssociationCriteria&gt;
    &lt;/Record&gt;
&lt;/HRFeed&gt;

--529448d158064de596afd8f892c84e15--

</code></pre>

    </div>
    <div id="description_hrfeed_examples_python">
        <h2 id="python">Python</h2>
        <p>One of the simpler examples is in <em>python</em>. For this to work one would need to install the <em>requests</em> python package.</p>
<pre><code class="python">#!/usr/bin/env python

import requests


FILE_NAME = 'feed.xml'
API_URL = 'https://api.figshare.com/v2/institution/hrfeed/upload'
TOKEN = '86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df'


def main():
    headers = {&quot;Authorization&quot;: &quot;token &quot; + TOKEN}
    with open(FILE_NAME, 'rb') as fin:
        files = {'hrfeed': (FILE_NAME, fin)}
        resp = requests.post(API_URL, files=files, headers=headers)

        print(resp.content)

        resp.raise_for_status()

if __name__ == '__main__':
    main()

</code></pre>
    </div>
    <div id="description_hrfeed_examples_java">
        <h2 id="java">Java</h2>
        <p>For java one can use apache <em>httpcomponents</em>:</p>
<pre><code class="java">import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.lang.Throwable;

import org.apache.http.HttpEntity;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.ContentType;
import org.apache.http.entity.mime.MultipartEntityBuilder;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;

public class HRFeedUploaderExample {
    public static void main(String[] args) {
        try {
            HRFeedUploaderExample hfue = new HRFeedUploaderExample(args[0]);
            hfue.upload();
        } catch (Throwable t) {
            t.printStackTrace(System.err);
        }
    }

    private static final String API_URL = &quot;https://api.figshare.com/v2/institution/hrfeed/upload&quot;;
    private static final String TOKEN = &quot;86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df&quot;;

    private String fileName = null;

    HRFeedUploaderExample(String fileName) {
        this.fileName = fileName;
    }

    public void upload() throws IOException {
        CloseableHttpClient httpClient = HttpClients.createDefault();
        HttpPost uploadFile = new HttpPost(API_URL);

        uploadFile.addHeader(&quot;Authorization&quot;, &quot;token &quot; + TOKEN);

        MultipartEntityBuilder builder = MultipartEntityBuilder.create();
        File file = new File(fileName);

        builder.addBinaryBody(&quot;hrfeed&quot;, new FileInputStream(file), ContentType.TEXT_PLAIN, file.getName());

        HttpEntity multipart = builder.build();
        uploadFile.setEntity(multipart);

        CloseableHttpResponse response = httpClient.execute(uploadFile);
        int status = response.getStatusLine().getStatusCode();

        System.out.println(&quot;Status code was: &quot; + status);
    }
}
</code></pre>

        <p>Or if you don't mind getting down and dirty with raw <strong>HTTP</strong>:</p>
<pre><code class="java">import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.lang.Throwable;
import java.net.URL;
import java.net.HttpURLConnection;

public class HRFeedUploaderExample {
    public static void main(String[] args) {
        try {
            HRFeedUploaderExample hfue = new HRFeedUploaderExample(args[0]);
            hfue.upload();
        } catch (Throwable t) {
            t.printStackTrace(System.err);
        }
    }

    private static final String API_URL = &quot;https://api.figshare.com/v2/institution/hrfeed/upload&quot;;
    private static final String TOKEN = &quot;86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df&quot;;

    private String fileName = null;

    HRFeedUploaderExample(String fileName) {
        this.fileName = fileName;
    }

    public void upload() throws IOException {
        HttpURLConnection con = (HttpURLConnection) new URL(API_URL).openConnection();
        String boundary = &quot;123456789boundary987654321&quot;;
        byte[] byteBoundary = (&quot;\n--&quot; + boundary + &quot;\n&quot;).getBytes(&quot;UTF-8&quot;);

        con.setDoOutput(true);
        con.setRequestProperty(&quot;Content-Type&quot;, &quot;multipart/form-data; boundary=&quot; + boundary);
        con.setRequestProperty(&quot;Authorization&quot;, &quot;token &quot; + TOKEN);

        File file = new File(fileName);
        try (OutputStream out = con.getOutputStream()) {
            out.write(byteBoundary);
            out.write((&quot;Content-Disposition: form-data; name=\&quot;hrfeed\&quot;; filename=\&quot;&quot; + fileName + &quot;\&quot;\n\n&quot;).getBytes(&quot;UTF-8&quot;));
            try (FileInputStream in = new FileInputStream(file)) {
                byte[] data = new byte[(int) file.length()];
                in.read(data);
                out.write(data);
            }
            out.write(byteBoundary);
        }
        int status = con.getResponseCode();
        System.out.println(&quot;Status code was: &quot; + status);
    }
}
</code></pre>


    </div>
    <div id="description_hrfeed_examples_csharp">
        <h2 id="c">C#</h2>
        <p>For the <strong>.NET / mono</strong> users there's this snippet of code:</p>
<pre><code class="Csharp">
using System;
using System.Net.Http;
using System.IO;
using System.Threading.Tasks;

namespace HRFeedUploadExample
{
  class MainClass
  {
    private const String API_URL = &quot;https://api.figshare.com/v2/institution/hrfeed/upload&quot;;
    private const String TOKEN = &quot;86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df&quot;;
    private String fileName = null;

    public static void Main (string[] args)
    {
      MainClass app = new MainClass (args [0]);
      app.Upload ();
    }

    MainClass(String fileName) {
      this.fileName = fileName;
    }

    public void Upload() {
      HttpClient httpClient = new HttpClient ();
      httpClient.DefaultRequestHeaders.Add (&quot;Authorization&quot;, &quot;token &quot; + MainClass.TOKEN);

      MultipartFormDataContent form = new MultipartFormDataContent ();
      using (StreamReader sr = new StreamReader (this.fileName)) {
        String content = sr.ReadToEnd ();
        byte[] data = System.Text.Encoding.UTF8.GetBytes (content);

        form.Add (new ByteArrayContent (data, 0, data.Length), &quot;hrfeed&quot;, this.fileName);
      }

      Task&lt;HttpResponseMessage&gt; task = httpClient.PostAsync (MainClass.API_URL, form);
      task.Wait();
      HttpResponseMessage response = task.Result;
      response.EnsureSuccessStatusCode();

      Console.WriteLine (&quot;Status code was: &quot; + response.StatusCode);

      httpClient.Dispose();
    }
  }
}
</code></pre>
    </div>
    <div id="description_hrfeed_examples_curl">
        <h2 id="curl">CURL</h2>
        <p>Probably one of the most versatile ways of uploading an HRFeed is through <strong>curl</strong> given the possibility
        of integrating it into any other command line utility on linux/unix.</p>
<pre><code class="curl">curl -XPOST\
    -H&quot;Authorization: token 86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df&quot;\
    -F&quot;hrfeed=@feed.csv&quot;\
    https://api.figshare.com/v2/institution/hrfeed/upload
</code></pre>


    </div>
    <div id="description_hrfeed_response">
        <h2 id="response">Response</h2>
        <ul>
        <li>Status: <code>200 OK</code></li>
        <li>
        <p>Body:</p>
        <p><code>
json
{
    "message": "OK"
}       </code></p>
        </li>
        </ul>
    </div>
    <div id="description_hrfeed_errors">
        <h2 id="errors">Errors</h2>
        <p>Standard <a href="../#errors">error responses</a>
        Most common:</p>
<pre><code class="json">{
    &quot;message&quot;: &quot;Previous feed import not complete.&quot;,
    &quot;data&quot;: null,
    &quot;errcode&quot;: &quot;FigshareAPIException&quot;
}
</code></pre>

        <p>when the feed has already been submitted within a 24 hour span.</p>


    </div>
    <div id="description_hrfeed_notes">
        <h2 id="notes">Notes</h2>
        <p>The <em>success</em> response doesn't give much information other than the fact that the system has
        understood the request, has received the file and has initiated the necessary tasks.
        There are plans for a way to get more in depth information for the state of the <strong>HRFeed Process</strong>.</p>
        <p>The <em>token</em> given in the upper examples is a general fig<strong>share</strong> API personal token of any of
        the admins at the institution. No other user should be able to access this endpoint, apart from
        those given the express permission of uploading HR feeds.</p>

    </div>

            </div>
    <div id="description_custom_fields_endpoint">
        <h3 id="upload-custom-fields-file">Upload Custom Fields File</h3>
        <h4 id="request">Request</h4>
        <pre><code class="http">POST /v2/institution/custom_fields/{custom_field_id}/items/upload
        </code></pre>

        <p>The request needs to be of type <code>multipart/form-data</code> and have its <strong>Content-Type</strong> header set to the same value; the body of the file is sent as the form data.
        A typical request looks like this:</p>
<pre><code class="http">POST institution/custom_fields/{custom_field_id}/items/upload HTTP/1.1
Host: api.figshare.com
Content-Length: 975
Accept-Encoding: gzip, deflate
Accept: */*
User-Agent: python-requests/2.5.3 CPython/2.7.10 Linux/4.1.4-1-ARCH
Connection: keep-alive
Content-Type: multipart/form-data; boundary=529448d158064de596afd8f892c84e15
Authorization: token 86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df

--529448d158064de596afd8f892c84e15
Content-Disposition: form-data; name="external_file"; filename="example_file.csv"

[file content goes there]

--529448d158064de596afd8f892c84e15--


</code></pre>

    </div>
    <div id="description_custom_fields_examples_python">
        <h2 id="python">Python</h2>
        <p>One of the simpler examples is in <em>python</em>. For this to work one would need to install the <em>requests</em> python package.</p>
<pre><code class="python">#!/usr/bin/env python

import requests


FILE_NAME = 'example_file.csv'
API_URL = 'https://api.figshare.com/v2/account/institution/custom_fields/{custom_field_id}/items/upload'.format(custom_field_id=1)
TOKEN = '86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df'


def main():
    headers = {"Authorization": "token " + TOKEN}
    with open(FILE_NAME, 'rb') as fin:
        files = {'external_file': (FILE_NAME, fin)}
        resp = requests.post(API_URL, files=files, headers=headers)

        print(resp.content)

        resp.raise_for_status()

</code></pre>
    </div>
    <div id="description_custom_fields_examples_java">
        <h2 id="java">Java</h2>
        <p>For java one can use apache <em>httpcomponents</em>:</p>
<pre><code class="java">import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.lang.Throwable;

import org.apache.http.HttpEntity;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.ContentType;
import org.apache.http.entity.mime.MultipartEntityBuilder;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;

public class CSVUploaderExample {
    public static void main(String[] args) {
        try {
            CSVUploaderExample ex = new CSVUploaderExample(args[0]);
            ex.upload();
        } catch (Throwable t) {
            t.printStackTrace(System.err);
        }
    }

    private static final String API_URL = "https://api.figshare.com/v2/account/institution/custom_fields/1/items/upload";
    private static final String TOKEN = "86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df";

    private String fileName = null;

    CSVUploaderExample(String fileName) {
        this.fileName = fileName;
    }

    public void upload() throws IOException {
        CloseableHttpClient httpClient = HttpClients.createDefault();
        HttpPost uploadFile = new HttpPost(API_URL);

        uploadFile.addHeader("Authorization", "token " + TOKEN);

        MultipartEntityBuilder builder = MultipartEntityBuilder.create();
        File file = new File(fileName);

        builder.addBinaryBody("external_file", new FileInputStream(file), ContentType.TEXT_PLAIN, file.getName());

        HttpEntity multipart = builder.build();
        uploadFile.setEntity(multipart);

        CloseableHttpResponse response = httpClient.execute(uploadFile);
        int status = response.getStatusLine().getStatusCode();

        System.out.println("Status code was: " + status);
    }
}

</code></pre>
    </div>
    <div id="description_custom_fields_examples_csharp">
        <h2 id="c">C#</h2>
        <p>For the <strong>.NET / mono</strong> users there's this snippet of code:</p>
<pre><code class="Csharp">
using System;
using System.Net.Http;
using System.IO;
using System.Threading.Tasks;

namespace CSVUploaderExample
{
  class MainClass
  {
    private const String API_URL = "https://api.figshare.com/v2/account/institution/custom_fields/1/items/upload";
    private const String TOKEN = "86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df";
    private String fileName = null;

    public static void Main (string[] args)
    {
      MainClass app = new MainClass (args [0]);
      app.Upload ();
    }

    MainClass(String fileName) {
      this.fileName = fileName;
    }

    public void Upload() {
      HttpClient httpClient = new HttpClient ();
      httpClient.DefaultRequestHeaders.Add ("Authorization", "token " + MainClass.TOKEN);

      MultipartFormDataContent form = new MultipartFormDataContent ();
      using (StreamReader sr = new StreamReader (this.fileName)) {
        String content = sr.ReadToEnd ();
        byte[] data = System.Text.Encoding.UTF8.GetBytes (content);

        form.Add (new ByteArrayContent (data, 0, data.Length), "external_file", this.fileName);
      }

      Task<HttpResponseMessage> task = httpClient.PostAsync (MainClass.API_URL, form);
      task.Wait();
      HttpResponseMessage response = task.Result;
      response.EnsureSuccessStatusCode();

      Console.WriteLine ("Status code was: " + response.StatusCode);

      httpClient.Dispose();
    }
  }
}
</code></pre>
    </div>
    <div id="description_custom_fields_examples_curl">
        <h2 id="curl">CURL</h2>
        <p>Probably one of the most versatile ways of uploading a Custom Fields values CSV is through <strong>curl</strong> given the possibility
        of integrating it into any other command line utility on linux/unix.</p>
<pre><code class="curl">curl -XPOST\
    -H"Authorization: token 86bbaa5d6d51fc0ae2f2defd3a474dac77ae27179ff6d04dd37e74c531bd6ed059eda584b41356337c362a259e482eb36a34825c805344e0600bb875a77444df"\
    -F"external_file=@my_file.csv"\
    https://api.figshare.com/v2/account/institution/custom_fields/1/items/upload
</code></pre>


    </div>
    <div id="description_custom_fields_response">
        <h2 id="response">Response</h2>
<pre><code class="json">{
    &quot;message&quot;: &quot;OK&quot;,
    "code": "200"
}
</code></pre>
    </div>
    <div id="description_custom_fields_errors">
        <h2 id="errors">Errors</h2>
        <p>Standard <a href="../#errors">error responses</a><p>
        <p>Other specific errors:</p>
<pre><code class="json">{
    &quot;message&quot;: &quot;Previous import still in progress!&quot;,
    "code": "PreviousCustomFieldUploadNotComplete"
}
</code></pre>

        <p>when the feed has already been submitted within a 60 minutes span.</p>

<pre><code class="json">{
    &quot;message&quot;: &quot;You are not allowed to upload values for this custom field&quot;,
    "code": "DropdownLargeListFieldUpdateUnauthorizedError"
}
</code></pre>

    <p>when the user is not authorized to make the upload</p>

        <pre><code class="json">{
    &quot;message&quot;: &quot;This custom field cannot be updated via this method&quot;,
    "code": "BadRequest"
}
</code></pre>

    <p>when trying to upload a file for a custom field of a different type besides dropdown_large_list.</p>

    </div>
    <div id="description_custom_fields_notes">
        <h2 id="notes">Notes</h2>
        <p>The <em>success</em> response only indicates the fact that the system has
        understood the request, has received the file and has initiated the necessary tasks. It is not a confirmation that the file processing is complete.
        <p>The <em>token</em> given in the upper examples is a general Fig<strong>share</strong> API personal belonging to an admin/owner
        of the group the custom field has been created in (either institutional admin or group admin/owner). No other users
        should be able to use this endpoint (otherwise an <strong>Unauthorised</strong> error will be returned).
        </p>
        <p>By default, only one file upload can be initiated every 60 minutes per portal. The enforced delay will not be automatically lifted
            if the custom field is deleted in the meantime. The length of this enforced delay can be customized by submitting a request to Figshare support.</p>
        <p>The only supported file format at the moment is CSV. The first line of the file will be ignored, as it is assumed to be a header row.
            For all further rows, the values in all columns will be concatenated, with a single space inserted between each pair of values,
            and the result will be added as an item for the custom metadata field.
        For example, the following file content:</p>
<pre><code class="csv">
    header1,header2,header 3
    123,My awesome field value,456
</code></pre>

        <p>will generate a single custom field value <strong>123 My awesome field value 456.</strong></p>
        <p>Values must have a minimum of 3 characters and a maximum of 255 characters. All values outside of this interval will simply be ignored.</p>


    </div>

    <div id="description_api_features">
      <h1 id="api-feature-list">API feature list</h1>
      <p>The figshare api v2 is accessible at https://api.figshare.com/v2. All
      communication is done through <em>https</em> and all data is encoded as <code>JSON</code>.</p>
      <ul>
      <li><a href="#figshare_documentation_api_description_sending_parameters">Sending parameters</a></li>
      <li><a href="#figshare_documentation_api_description_resource_representations">Resource representations</a></li>
      <li><a href="#figshare_documentation_api_description_authentication">Authentication</a></li>
      <li><a href="#figshare_documentation_api_description_errors">Errors</a></li>
      <li><a href="#figshare_documentation_api_description_searching_filtering_and_pagination">Searching, filtering and pagination</a></li>
      <li><a href="#figshare_documentation_api_description_rate_limiting">Rate limiting</a></li>
      <li><a href="#figshare_documentation_api_description_conditional_requests">Conditional requests</a></li>
      <li><a href="#figshare_documentation_api_description_cors_policy">CORS policy</a></li>
      <li>Endpoints</li>
      <li><a href="#collections_list">collections</a></li>
      <li><a href="#articles_list">items</a></li>
      <li><a href="#projects_list">projects</a></li>
      </ul>
    </div>
    <div id="description_api_parameters">
      <h2 id="sending-parameters">Sending parameters</h2>
      <p>More often than not you need to send parameters to an endpoint. For
      <code>GET</code> requests these are usualy sent in the query string but for <code>POST</code>
      and <code>PUT</code> requests they are usually in the body of the request.</p>
      <h3 id="query-string">Query string</h3>
      <p>Query strings can contain parameters encoded as <code>application/x-www-form-urlencoded</code>. Very common for <code>GET</code> requests.</p>
      <p><strong>Example</strong>: Sending <code>page</code> parameter when listing articles:</p>
      <pre><code class="http">GET /v2/articles?page=3 HTTP/1.1
      Host: api.figshare.com
      Authorization: token a287ab8c7ebdbe6
      </code></pre>

      <h3 id="request-json-body">Request json body</h3>
      <p><code>POST</code> and <code>PUT</code> request usualy read their params from the body of the
      http request. Our API only understands <code>application/json</code> encoded
      bodies.</p>
      <p><strong>Example</strong>: Sending <code>search_for</code> parameter when searching for articles:</p>
      <pre><code class="http">POST /v2/articles/search HTTP/1.1
      Host: api.figshare.com
      Authorization: token a287ab8c7ebdbe6

      {
          &quot;search_for&quot;: &quot;figshare&quot;
      }
      </code></pre>

    </div>
    <div id="description_api_resourcerepresentation">
      <h2 id="resource-representations">Resource representations</h2>
      <p>Resources can be presented differently across endpoints. Usually
      endpoints that return a list of resources will send a <em>lighter</em>
      representation of each resource while an endpoint for an individual
      resource will use a more <em>detailed</em> and <em>complete</em> representation.</p>
      <p>Representations for each resource type are documented inside each endpoint in the Body Schema section.</p>
      <p>Blank resource fields are included in the representation as <code>null</code> instead
      of being omitted.</p>
    </div>
    <div id="description_api_auth">
      <h2 id="authentication">Authentication</h2>
      <p>The v2 API supports OAuth2 access tokens, issued as
      described in the <a href="#figshare_documentation_oauth">oauth section</a>.</p>
      <p>In addition to oauth access tokens, you can also use a <em>personal token</em>
      which grants you full access to your account. Personal tokens can be
      created and managed from the <a href="https://figshare.com/account/applications">applications
      page</a> at figshare.</p>
      <p>Any of these tokens can be used to authenticate and there are 2 options
      to include them in requests:</p>
      <h3 id="http-header-recommended">HTTP header (<em>recommended</em>)</h3>
      <pre><code class="http">GET /v2/token HTTP/1.1
      Host: api.figshare.com
      Authorization: token ACCESS_TOKEN
      </code></pre>

      <p>Example with <code>curl</code>:</p>
      <pre><code class="bash">curl -H &quot;Authorization: token ACCESS_TOKEN&quot; https://api.figshare.com/v2
      </code></pre>

      <h3 id="query-param">Query param:</h3>
      <pre><code class="http">GET /v2/token?access_token=ACCESS_TOKEN HTTP/1.1
      Host: api.figshare.com
      </code></pre>

      <p>Example with <code>curl</code>:</p>
      <pre><code class="bash">curl https://api.figshare.com/v2?access_token=ACCESS_TOKEN
      </code></pre>
    </div>
    <div id="description_api_errors">
      <h2 id="errors">Errors</h2>
      <p>Endpoints can respond with error responses. The common error responses
      for all endpoints are presented below and errors specific to individual
      enpoints are documented along with the endpoint.</p>
      <p>Each error response will have a specific HTTP status code and a JSON
      body with the following fields:</p>
      <table>
      <thead>
      <tr>
      <th>Field</th>
      <th>Description</th>
      </tr>
      </thead>
      <tbody>
      <tr>
      <td>message</td>
      <td>A human friendly message explaining the error.</td>
      </tr>
      <tr>
      <td>code</td>
      <td>A machine friendly error code, used by the dev team to identify the error.</td>
      </tr>
      <tr>
      <td>data</td>
      <td>An object containing extra information about the error. Documented for each error.</td>
      </tr>
      </tbody>
      </table>
      <h3 id="404-not-found">404 Not found</h3>
      <p>Trying to access resources that do not exist, will trigger this response
      from the API.</p>
      <p>This is also returned if you try to access a resource on which you don't
      have a <code>read</code> permission.</p>
      <h3 id="400-bad-request">400 Bad request</h3>
      <p>Sending a body that cannot be parsed as JSON will result in  this error
      response.</p>
      <h3 id="422-unprocessable-entity">422 Unprocessable Entity</h3>
      <p>Sending an invalid data structure in the body will trigger this error.
      Invalid data can be any of the following:</p>
      <ul>
      <li>missing field</li>
      <li>invalid value for a field</li>
      <li>any other rules specific to an endpoint</li>
      </ul>
      <h3 id="401-unauthorized">401 Unauthorized</h3>
      <p>This error is returned when the authorization was unsuccessfull. This can
      be either due to:</p>
      <ul>
      <li>missing authorization info in the request</li>
      <li>invalid or unknown authorization info</li>
      <li>expired or disabled account</li>
      </ul>
      <h3 id="403-forbidden">403 Forbidden</h3>
      <p>This response is presented whenever you try to do something which is not
      permitted for your current authorization.
      authorization info</p>
    </div>
    <div id="description_api_search">
      <h2 id="searching-filtering-and-pagination">Searching, filtering and pagination</h2>
      <p>Endpoints that list items usually support any of the following features:</p>
      <ul>
      <li>pagination</li>
      <li>ordering</li>
      <li>searching</li>
      <li>filtering</li>
      </ul>
      <h4 id="pagination-params">Pagination params</h4>
      <p>Pagination can be done by specifing either <code>page</code> and <code>page_size</code> params
      pair or the <code>limit</code> and <code>offset</code> params pair. If confusing combinations
      appear in a request, a <code>422 Unprocessable Entity</code> will be returned.</p>
      <table>
      <thead>
      <tr>
      <th>field</th>
      <th>type</th>
      <th>default</th>
      <th>description</th>
      </tr>
      </thead>
      <tbody>
      <tr>
      <td><code>page</code></td>
      <td>int</td>
      <td>1</td>
      <td>Page number</td>
      </tr>
      <tr>
      <td><code>page_size</code></td>
      <td>int</td>
      <td>10</td>
      <td>The number of results included on a page</td>
      </tr>
      <tr>
      <td><code>limit</code></td>
      <td>int</td>
      <td>10</td>
      <td>Number of results included on a page</td>
      </tr>
      <tr>
      <td><code>offset</code></td>
      <td>int</td>
      <td>0</td>
      <td>Where to start the listing(the offset of the first result)</td>
      </tr>
      </tbody>
      </table>
      <p>Please note that there's a limit on the maximum offset or page number  you can require.
      The offset is currently limited at 1000 and if exceeded a <code>422 Unprocessable Entity</code> error will be returned. For pages, it depends on the <code>page_size</code>
      but for a <code>page_size</code> of <code>10</code>, the maximum page would be <code>1000 / 10 = 100</code></p>
      <h4 id="ordering-params">Ordering params</h4>
      <p>Ordering is done via the <code>order</code> and <code>order_direction</code> params.</p>
      <table>
      <thead>
      <tr>
      <th>field</th>
      <th>type</th>
      <th>default</th>
      <th>description</th>
      </tr>
      </thead>
      <tbody>
      <tr>
      <td><code>order</code></td>
      <td>string</td>
      <td><em>varies</em></td>
      <td>The field by which to order. Default varies by endpoint/resource. For articles and collections, valid values are: <code>published_date</code> and <code>modified_date</code>.</td>
      </tr>
      <tr>
      <td><code>order_direction</code></td>
      <td>string</td>
      <td><em>varies</em></td>
      <td>Only <code>asc</code> and <code>desc</code> values are supported. Default varies by endpoint/resource</td>
      </tr>
      </tbody>
      </table>
      <h4 id="searching-params">Searching params</h4>
      <table>
      <thead>
      <tr>
      <th>field</th>
      <th>type</th>
      <th>description</th>
      </tr>
      </thead>
      <tbody>
      <tr>
      <td><code>search_for</code></td>
      <td>string</td>
      <td>Search endpoints require this field.  Usually min length is 3</td>
      </tr>
      </tbody>
      </table>
      <h4 id="filtering-params">Filtering params</h4>
      <p>Some endpoints allow filtering results. Filters are extra fields in the
      body and the documentation for each endpoint will present them in detail.</p>
    </div>
    <div id="description_api_ratelimit">
      <h2 id="rate-limiting">Rate limiting</h2>
      <p>Not implemented at this point.</p>
    </div>
    <div id="description_api_requests">
      <h2 id="conditional-requests">Conditional requests</h2>
      <p>Most responses should return an ETag header and a Last-Modified header.
      You can use the values of these headers to create conditional requests.
      We encourage  to use these whenever possible.</p>
    </div>
    <div id="description_api_cors">
      <h2 id="cors-policy">CORS policy</h2>
      <p>The API supports CORS for AJAX requests from any origin.</p>
    </div>
    <div id="description_api_impersonation">
      <h2>Impersonation</h2>
      <p>This feature is available only for institutional accounts with administrative privileges.</p>
        <p>
            To impersonate an account you have to include the <code>impersonate</code> option inside your http request.<br />
            The value for <code>impersonate</code> must be the <code>account_id</code> of the account you wish to impersonate.<br />
            You can see the accounts which can be impersonated using our <a href="#private_institution_accounts_list">account/institution/accounts</a> endpoint.<br />
        </p>
        <p>The <code>impersonate</code> option must be included in the query string when using the GET and DELETE methods, and in the body when using the POST and PUT methods.</p>
        <h3>GET Impersonation example:</h3>
        <p>Request:</p>
        <pre><code>GET /v2/account/articles?impersonate=1000009 HTTP/1.1
</code></pre>
        <p>Response will contain articles of the impersonated account</p>

        <h3>POST Impersonation example:</h3>
        <p>Request:</p>
        <pre><code>POST /v2/account/articles HTTP/1.1
</code></pre>
        <p>Body:</p>
        <pre><code>{
    "title": "test",
    "impersonate": 1000009
}</code></pre>
        <p>Will create an article for the impersonated account</p>

    </div>

</section>
</body>
</html>
